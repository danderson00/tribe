var d3 = require('d3')

module.exports = function (options) {
    return {
        handler: function (value, pathValues, allPaths, envelope) {
            if(envelope && (envelope.clientTime || envelope.serverTime))
                pathValues.push([new Date(envelope.serverTime || envelope.clientTime), value])
        },
        createScaling: function () {
            return {
                x: d3.scaleTime().range([0, options.width]),
                y: d3.scaleLinear().range([options.height, 0])
            }
        },
        createAxes: function () {
            return {
                x: d3.axisBottom().tickFormat(d3.timeFormat("%I:%M:%S")).tickSize(-options.height),
                y: d3.axisLeft().tickFormat(d3.format(",.0f")).tickSize(-options.width)
            }
        }
    }
}