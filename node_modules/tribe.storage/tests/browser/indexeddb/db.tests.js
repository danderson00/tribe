suite('tribe.storage.indexeddb.db', function () {
    var open = require('tribe.storage/indexeddb/open');

    test("basic store and retrieve with keyPath", function () {
        var db;

        return open('test', 1, function (database) {
            database.createObjectStore('test', { keyPath: 'id' });
        }).then(function (database) {
            db = database;
            return db.add({ id: 1, value: 'one' });
        }).then(function () {
            return db.get(1);
        }).then(function (result) {
            expect(result).to.deep.equal({ id: 1, value: 'one' });
        });
    });
});
