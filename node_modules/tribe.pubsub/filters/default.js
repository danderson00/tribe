var utils = require('../utils'),
    flatten = require('tribe.expressions/flatten');

module.exports = function (topic) {
    var handlers = {};

    return {
        add: function (handler, token) {
            handlers[token] = handler;
        },
        remove: function (token) {
            delete handlers[token];
        },
        get: function (envelope) {
            return flatten(utils.values(handlers));
        }
    };
};
