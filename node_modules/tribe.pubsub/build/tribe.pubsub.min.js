!function t(n,r,e){function i(u,o){if(!r[u]){if(!n[u]){var c="function"==typeof require&&require;if(!o&&c)return c(u,!0);if(s)return s(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var f=r[u]={exports:{}};n[u][0].call(f.exports,function(t){var r=n[u][1][t];return i(r?r:t)},f,f.exports,t,n,r,e)}return r[u].exports}for(var s="function"==typeof require&&require,u=0;u<e.length;u++)i(e[u]);return i}({1:[function(t,n){n.exports=function(t,n){function r(t){return function(n,r){s.endsChildrenExplicitly||s.endChildren(n),s.beforeMessage&&s.beforeMessage(r),t(n,r,s),s.afterMessage&&s.afterMessage(r)}}function e(t){return function(n){s.startChild({handles:t},n)}}function i(){return function(t){s.end(t)}}var s=this;t?t.constructor===Function?this.pubsub.subscribe(n,r(t),this.filterName,this.filterOptions):this.pubsub.subscribe(n,e(t),this.filterName,this.filterOptions):this.pubsub.subscribe(n,i())}},{}],2:[function(t,n){var r=t("./actor.addHandler"),e=t("./utils"),i=n.exports=function(t,n,r){function i(){n&&(n.constructor===Function?n(s):e.copyProperties(n,s,["handles","endsChildrenExplicitly","onstart","onresume","onsuspend","onend"]))}var s=this;t=t.createLifetime(),this.pubsub=t,this.children=[],this.id=r,i(),this.handles=this.handles||{},this.topics=e.keys(this.handles)};i.prototype.start=function(t){return this.onstart&&this.onstart(t,this),e.each(this.handles,this.addHandler,this),this},i.prototype.startChild=function(t,n){return this.children.push(new i(this.pubsub,t).start(n)),this},i.prototype.resume=function(t,n){return this.data=t,this.onresume&&this.onresume(n,this),e.each(this.handles,this.addHandler,this),this},i.prototype.suspend=function(t){return this.onsuspend&&this.onsuspend(t,this),this.pubsub.end(),this.suspendChildren(t),this},i.prototype.end=function(t){return this.onend&&this.onend(t,this),this.pubsub.end(),this.endChildren(t),this},i.prototype.endChildren=function(t){e.each(this.children,function(n){n.end(t)})},i.prototype.suspendChildren=function(t){e.each(this.children,function(n){n.suspend(t)})},i.prototype.mapsIdToMessageProperty=function(t){this.filterName="property",this.filterOptions={property:t,value:this.id}},i.prototype.addHandler=r},{"./actor.addHandler":1,"./utils":13}],3:[function(t){Tribe.PubSub=t("./pubsub")},{"./pubsub":9}],4:[function(t,n){n.exports=function(n,r){function e(t,n){var e=t&&t.topic?t:{topic:t,data:n};return e.channelId=r,e}function i(t){return function(n,e){e.channelId===r&&t(n,e)}}var s=this,u=t("./lifetime");n=n.createLifetime(),this.id=r,this.owner=n.owner,this.publish=function(t,r){return n.publish(e(t,r))},this.publishSync=function(t,r){return n.publishSync(e(t,r))},this.subscribe=function(t,r){return n.subscribe(t,i(r))},this.subscribeOnce=function(t,r){return n.subscribeOnce(t,i(r))},this.unsubscribe=function(t){return n.unsubscribe(t)},this.end=function(){return n.end()},this.createLifetime=function(){return new u(s,s.owner)}}},{"./lifetime":7}],5:[function(t,n){var r=t("../utils");n.exports=function(){var t={};return{add:function(n,r){t[r]=n},remove:function(n){delete t[n]},get:function(){return r.values(t)}}}},{"../utils":13}],6:[function(t,n){var r=t("../utils");n.exports=function(){var t={},n={};return{add:function(r,e,i){t[i.property]||(t[i.property]={});var s=t[i.property];s[i.value]||(s[i.value]={}),s[i.value][e]=r,n[e]=i},remove:function(r){var e=n[r];e&&(delete t[e.property][e.value][r],delete n[r])},get:function(n){if(!n.data)return[];var e=[];for(var i in t)if(t.hasOwnProperty(i)){var s=n.data[i];void 0!==s&&(e=e.concat(r.values(t[i][s])))}return e}}}},{"../utils":13}],7:[function(t,n){var r=n.exports=function(n,e){function i(t){return c.isArray(t)?a=a.concat(t):a.push(t),t}var s=this,u=t("./channel"),o=t("./actor"),c=t("./utils"),a=[];this.owner=e,this.publish=function(t,r){return n.publish(t,r)},this.publishSync=function(t,r){return n.publishSync(t,r)},this.subscribe=function(t,r,e,s){var u=n.subscribe(t,r,e,s);return i(u)},this.subscribeOnce=function(t,r){var e=n.subscribeOnce(t,r);return i(e)},this.unsubscribe=function(t){return n.unsubscribe(t)},this.channel=function(t){return new u(s,t)},this.end=function(){return n.unsubscribe(a)},this.createLifetime=function(){return new r(s,s.owner)},this.startActor=function(t,n){return new o(s,t).start(n)}}},{"./actor":2,"./channel":4,"./utils":13}],8:[function(t,n){n.exports={sync:!1,handleExceptions:!0,exceptionHandler:function(t,n){"undefined"!=typeof console&&console.log("Exception occurred in subscriber to '"+n.topic+"': "+Tribe.PubSub.utils.errorDetails(t))}}},{}],9:[function(t,n){n.exports=function(n){function r(t){function n(n){var r=i("exceptionHandler");if(i("handleExceptions")&&r)try{n(t.data,t)}catch(e){r(e,t)}else n(t.data,t)}for(var r=d.get(t),e=t.sync===!0||s.sync===!0,u=0,o=r.length;o>u;u++)e?n(r[u]):!function(t){setTimeout(function(){n(t)})}(r[u])}function e(t,n){return t&&t.topic?t:{topic:t,data:n}}function i(t){return s.options.hasOwnProperty(t)?s.options[t]:p[t]}var s=this,u=t("./lifetime"),o=t("./channel"),c=t("./actor"),a=t("./topicList"),f=t("./subscribeOnce"),h=t("./subscribeTo"),p=t("./options"),l=t("./utils");this.owner=this,this.options=n||{},this.sync=i("sync");var d=new a;this.subscribers=d,this.publish=function(t,n){return r(e(t,n))},this.publishSync=function(t,n){var i=e(t,n);return i.sync=!0,r(i)},this.subscribe=function(t,n,r,e){return"string"==typeof t?d.add(t,n,r,e):l.isArray(t)?l.map(t,function(t){return d.add(t,n,r,e)}):l.map(t,function(t,n){return d.add(n,t,r,e)})},this.subscribe.to=h(this),this.unsubscribe=function(t){if(l.isArray(t)){for(var n=[],r=0,e=t.length;e>r;r++)n.push(d.remove(t[r]));return n}return d.remove(t)},this.createLifetime=function(){return new u(s,s)},this.channel=function(t){return new o(s,t)},this.startActor=function(t,n){return new c(s,t).start(n)},this.subscribeOnce=f}},{"./actor":2,"./channel":4,"./lifetime":7,"./options":8,"./subscribeOnce":10,"./subscribeTo":11,"./topicList":12,"./utils":13}],10:[function(t,n){n.exports=function(t,n){function r(){var r={};return u.each(t,function(t){r[t]=i(n)}),r}function e(){return u.map(t,function(t,n){return o.subscribe(n,i(t))})}function i(t){return function(){o.end(),t.apply(s,arguments)}}var s=this,u=Tribe.PubSub.utils,o=this.createLifetime();return"string"==typeof t?o.subscribe(t,i(n)):o.subscribe(u.isArray(t)?r():e())}},{}],11:[function(t,n){n.exports=function(t){return function(n){return{when:function(r){return{equals:function(e){return{execute:function(i){return t.subscribe(n,i,"property",{property:r,value:e})}}}}},execute:function(r){return t.subscribe(n,r)}}}}},{}],12:[function(t,n){var r={"default":t("./filters/default"),property:t("./filters/property")};n.exports=function(){function t(t,n){if("*"===n)return!0;var r="^"+n.replace(/\./g,"\\.").replace(/\*/g,"[^.]*")+"$";return t.match(r)}var n={},e=-1;this.get=function(r){var e=r.topic,i=[];for(var s in n)if(n.hasOwnProperty(s)&&t(e,s))for(var u in n[s])n[s].hasOwnProperty(u)&&(i=i.concat(n[s][u].get(r)));return i},this.add=function(t,i,s,u){s=s||"default";var o=(++e).toString();n.hasOwnProperty(t)||(n[t]={});var c=n[t];return c[s]||(c[s]=r[s](t)),c[s].add(i,o,u),o},this.remove=function(t){for(var r in n)if(n.hasOwnProperty(r))for(var e in n[r])n[r].hasOwnProperty(e)&&n[r][e].remove(t)}}},{"./filters/default":5,"./filters/property":6}],13:[function(t,n){var r=n.exports={};r.isArray=function(t){return t.constructor===Array},r.copyProperties=function(t,n,r){for(var e=0,i=r.length;i>e;e++){var s=r[e];t.hasOwnProperty(s)&&(n[s]=t[s])}},r.errorDetails=function(t){return t?t.constructor===String?t:(t.stack||"")+(t.inner?"\n\n"+r.errorDetails(t.inner):"\n"):""};var e=Array.prototype.forEach,i=Array.prototype.map,s={};r.each=function(t,n,r){if(null!=t)if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===+t.length){for(var i=0,u=t.length;u>i;i++)if(n.call(r,t[i],i,t)===s)return}else for(var o in t)if(t.hasOwnProperty(o)&&n.call(r,t[o],o,t)===s)return},r.map=function(t,n,e){var s=[];return null==t?s:i&&t.map===i?t.map(n,e):(r.each(t,function(t,r,i){s[s.length]=n.call(e,t,r,i)}),s)},r.keys=function(t){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(r);return n},r.values=function(t){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(t[r]);return n}},{}]},{},[3]);