!function n(t,r,e){function i(u,o){if(!r[u]){if(!t[u]){var c="function"==typeof require&&require;if(!o&&c)return c(u,!0);if(s)return s(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var a=r[u]={exports:{}};t[u][0].call(a.exports,function(n){var r=t[u][1][n];return i(r?r:n)},a,a.exports,n,t,r,e)}return r[u].exports}for(var s="function"==typeof require&&require,u=0;u<e.length;u++)i(e[u]);return i}({1:[function(n,t){t.exports=function(n,t){function r(n){return function(t,r){s.endsChildrenExplicitly||s.endChildren(t),s.preMessage&&s.preMessage(r),n(t,r,s),s.postMessage&&s.postMessage(r)}}function e(n){return function(t){s.startChild({handles:n},t)}}function i(){return function(n){s.end(n)}}var s=this;n?n.constructor===Function?this.pubsub.subscribe(t,r(n)):this.pubsub.subscribe(t,e(n)):this.pubsub.subscribe(t,i())}},{}],2:[function(n,t){var r=n("./actor.addHandler"),e=n("./utils"),i=t.exports=function(n,t){function r(){t&&(t.constructor===Function?t(i):e.copyProperties(t,i,["handles","endsChildrenExplicitly","onstart","onresume","onsuspend","onend"]))}var i=this;n=n.createLifetime(),this.pubsub=n,this.children=[],r(),this.handles=this.handles||{},this.topics=Object.keys(this.handles)};i.prototype.start=function(n){return e.each(this.handles,this.addHandler,this),this.onstart&&this.onstart(n,this),this},i.prototype.startChild=function(n,t){return this.children.push(new i(this.pubsub,n).start(t)),this},i.prototype.resume=function(n,t){return e.each(this.handles,this.addHandler,this),this.data=n,this.onresume&&this.onresume(t,this),this},i.prototype.suspend=function(n){return this.onsuspend&&this.onsuspend(n,this),this.pubsub.end(),this.suspendChildren(n),this},i.prototype.end=function(n){return this.onend&&this.onend(n,this),this.pubsub.end(),this.endChildren(n),this},i.prototype.endChildren=function(n){e.each(this.children,function(t){t.end(n)})},i.prototype.suspendChildren=function(n){e.each(this.children,function(t){t.suspend(n)})},i.prototype.addHandler=r},{"./actor.addHandler":1,"./utils":10}],3:[function(n){Tribe.PubSub=n("./pubsub")},{"./pubsub":7}],4:[function(n,t){t.exports=function(t,r){function e(n,t){var e=n&&n.topic?n:{topic:n,data:t};return e.channelId=r,e}function i(n){return function(t,e){e.channelId===r&&n(t,e)}}var s=this,u=n("./lifetime");t=t.createLifetime(),this.id=r,this.owner=t.owner,this.publish=function(n,r){return t.publish(e(n,r))},this.publishSync=function(n,r){return t.publishSync(e(n,r))},this.subscribe=function(n,r){return t.subscribe(n,i(r))},this.subscribeOnce=function(n,r){return t.subscribeOnce(n,i(r))},this.unsubscribe=function(n){return t.unsubscribe(n)},this.end=function(){return t.end()},this.createLifetime=function(){return new u(s,s.owner)}}},{"./lifetime":5}],5:[function(n,t){var r=t.exports=function(t,e){function i(n){return c.isArray(n)?h=h.concat(n):h.push(n),n}var s=this,u=n("./channel"),o=n("./actor"),c=n("./utils"),h=[];this.owner=e,this.publish=function(n,r){return t.publish(n,r)},this.publishSync=function(n,r){return t.publishSync(n,r)},this.subscribe=function(n,r){var e=t.subscribe(n,r);return i(e)},this.subscribeOnce=function(n,r){var e=t.subscribeOnce(n,r);return i(e)},this.unsubscribe=function(n){return t.unsubscribe(n)},this.channel=function(n){return new u(s,n)},this.end=function(){return t.unsubscribe(h)},this.createLifetime=function(){return new r(s,s.owner)},this.startActor=function(n,t){return new o(s,n).start(t)}}},{"./actor":2,"./channel":4,"./utils":10}],6:[function(n,t){t.exports={sync:!1,handleExceptions:!0,exceptionHandler:function(n,t){"undefined"!=typeof console&&console.log("Exception occurred in subscriber to '"+t.topic+"': "+Tribe.PubSub.utils.errorDetails(n))}}},{}],7:[function(n,t){t.exports=function(t){function r(n){function t(t){var r=i("exceptionHandler");if(i("handleExceptions")&&r)try{t(n.data,n)}catch(e){r(e,n)}else t(n.data,n)}for(var r=l.get(n.topic),e=n.sync===!0||s.sync===!0,u=0,o=r.length;o>u;u++)e?t(r[u].handler):!function(n){setTimeout(function(){t(n.handler)})}(r[u])}function e(n,t){return n&&n.topic?n:{topic:n,data:t}}function i(n){return s.options.hasOwnProperty(n)?s.options[n]:f[n]}var s=this,u=n("./lifetime"),o=n("./channel"),c=n("./actor"),h=n("./subscriberList"),a=n("./subscribeOnce"),f=n("./options"),p=n("./utils");this.owner=this,this.options=t||{},this.sync=i("sync");var l=new h;this.subscribers=l,this.publish=function(n,t){return r(e(n,t))},this.publishSync=function(n,t){var i=e(n,t);return i.sync=!0,r(i)},this.subscribe=function(n,t){return"string"==typeof n?l.add(n,t):p.isArray(n)?p.map(n,function(n){return l.add(n,t)}):p.map(n,function(n,t){return l.add(t,n)})},this.unsubscribe=function(n){if(p.isArray(n)){for(var t=[],r=0,e=n.length;e>r;r++)t.push(l.remove(n[r]));return t}return l.remove(n)},this.createLifetime=function(){return new u(s,s)},this.channel=function(n){return new o(s,n)},this.startActor=function(n,t){return new c(s,n).start(t)},this.subscribeOnce=a}},{"./actor":2,"./channel":4,"./lifetime":5,"./options":6,"./subscribeOnce":8,"./subscriberList":9,"./utils":10}],8:[function(n,t){t.exports=function(n,t){function r(){var r={};return u.each(n,function(n){r[n]=i(t)}),r}function e(){return u.map(n,function(n,t){return o.subscribe(t,i(n))})}function i(n){return function(){o.end(),n.apply(s,arguments)}}var s=this,u=Tribe.PubSub.utils,o=this.createLifetime();return"string"==typeof n?o.subscribe(n,i(t)):o.subscribe(u.isArray(n)?r():e())}},{}],9:[function(n,t){t.exports=function(){function n(n,t){if("*"===t)return!0;var r="^"+t.replace(/\./g,"\\.").replace(/\*/g,"[^.]*")+"$";return n.match(r)}var t={},r=-1;this.get=function(r){var e=[];for(var i in t)t.hasOwnProperty(i)&&n(r,i)&&(e=e.concat(t[i]));return e},this.add=function(n,e){var i=(++r).toString();return t.hasOwnProperty(n)||(t[n]=[]),t[n].push({topic:n,handler:e,token:i}),i},this.remove=function(n){for(var r in t)if(t.hasOwnProperty(r))for(var e=0,i=t[r].length;i>e;e++)if(t[r][e].token===n)return t[r].splice(e,1),n;return!1}}},{}],10:[function(n,t){var r=t.exports={};r.isArray=function(n){return n.constructor===Array},r.copyProperties=function(n,t,r){for(var e=0,i=r.length;i>e;e++){var s=r[e];n.hasOwnProperty(s)&&(t[s]=n[s])}},r.errorDetails=function(n){return n?n.constructor===String?n:(n.stack||"")+(n.inner?"\n\n"+r.errorDetails(n.inner):"\n"):""};var e=Array.prototype.forEach,i=Array.prototype.map,s={};r.each=function(n,t,r){if(null!=n)if(e&&n.forEach===e)n.forEach(t,r);else if(n.length===+n.length){for(var i=0,u=n.length;u>i;i++)if(t.call(r,n[i],i,n)===s)return}else for(var o in n)if(n.hasOwnProperty(o)&&t.call(r,n[o],o,n)===s)return},r.map=function(n,t,e){var s=[];return null==n?s:i&&n.map===i?n.map(t,e):(r.each(n,function(n,r,i){s[s.length]=t.call(e,n,r,i)}),s)}},{}]},{},[3]);