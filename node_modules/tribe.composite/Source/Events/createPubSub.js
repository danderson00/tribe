T.Events.createPubSub = function (pane, context) {
    // this does not cascade scope correctly
    // if (context.pubsub)
    //     pane.pubsub = (pane.scope === 'reset' && context.pubsub.owner)
    //         ? context.pubsub.owner.createLifetime()
    //         : context.pubsub.createLifetime(T.Utils.cloneData(pane.scope));

    var parentNode = pane.node.parent;

    if(pane.scope === 'reset')
        pane.pubsub = context.pubsub.createLifetime();
    else if(pane.resetScope)
        pane.pubsub = context.pubsub.createLifetime(T.Utils.cloneData(pane.scope));
    else if(parentNode)
        pane.pubsub = parentNode.pane.pubsub.createLifetime(T.Utils.cloneData(pane.scope));
    else
        pane.pubsub = context.pubsub.createLifetime(T.Utils.cloneData(pane.scope));
};
