module('Integration.Navigate', {
    setup: Test.Integration.createTestElement,
    teardown: Test.Integration.teardown
});

test("navigating child pane transitions node marked with handlesNavigation", function () {
    T.createNode('.test', { path: 'Navigate/layout' });
    T.nodeFor('.child1').navigate('content2');
    equal($('.child2').length, 1);
    equal($('.content1').length, 0);
});

test("navigating root pane transitions node marked with handlesNavigation", function () {
    T.createNode('.test', { path: 'Navigate/layout' });
    T.nodeFor('.layout').navigate('content2');
    equal($('.layout').length, 1);
    equal($('.child2').length, 1);
    equal($('.content1').length, 0);
});

test("navigating back returns to previous pane", function() {
    T.createNode('.test', { path: 'Navigate/layout' });
    var node = T.nodeFor('.layout');
    node.navigate('content2');
    equal($('.content1').length, 0);
    node.navigateBack();
    equal($('.content1').length, 1);
});

test("setting observable on pane bindingHandler replaces node", function () {
    T.createNode('.test', { path: 'Navigate/observable' });
    T.nodeFor('.observable').pane.model.currentPane('content2');
    equal($('.observable').length, 1);
    equal($('.content1').length, 0);
    equal($('.content2').length, 1);
    T.nodeFor('.observable').pane.model.currentPane('content1');
    equal($('.content1').length, 1);
    equal($('.content2').length, 0);
});

test("setting observable on virtual pane bindingHandler replaces node", function () {
    T.createNode('.test', { path: 'Navigate/virtual' });
    T.nodeFor('.virtual').pane.model.currentPane('content2');
    equal($('.virtual').length, 1);
    equal($('.content1').length, 0);
    equal($('.content2').length, 1);
    T.nodeFor('.virtual').pane.model.currentPane('content1');
    equal($('.content1').length, 1);
    equal($('.content2').length, 0);
});
