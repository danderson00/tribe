var storage = require('tribe/storage'),
    actors = require('tribe/actors');

module.exports = function (options) {
    var actor = actors.actors[options.name],
        eventStore = storage.entity('messages');
    if(actor && actor.definition.messageFilter) {
        return eventStore.retrieve({
            p: actor.definition.messageFilter.options.property,
            v: options.id
        }).then(function (envelopes) {
            return { envelopes: envelopes };
        });
    }
};