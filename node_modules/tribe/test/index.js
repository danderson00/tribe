var options = require('tribe/options'),
    log = require('tribe/logger'),
    host = require('./host'),
    service = require('./service'),
    framework = require('./' + options.test.framework),
    _ = require('underscore');

module.exports = _.extend(framework, {
    initialise: function (asHost) {
        log.info('Loading tests...');

        _.each(options.testPaths, framework.loadDirectory);

        if (asHost) host.start();

        service.register();

        return this;
    }
});
