var hub = require('tribe/client/hub'),
    uuid = require('node-uuid');

suite('tribe.browser.integration.topic', function () {
    test("topic renders one element per message", function () {
        var scopeId = uuid.v4();
        hub.publish({ topic: 'topic', data: { scopeId: scopeId, value: 'a' } });
        hub.publish({ topic: 'topic', data: { scopeId: scopeId, value: 'b' } });
        hub.publish({ topic: 'topic', data: { scopeId: 'other scope', value: 'c' } });

        var node = T.createNode('body', { path: '/tests/topic', scope: { scopeId: scopeId } });
        $.when(node.pane.is.rendered).then(function () {
            expect($('#parent').text()).to.equal('ab');
        })
    })
})
