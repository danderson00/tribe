suite('tribe.browser.integration.validation', function () {
    test("validation specified on models is validated", function () {
        var node = T.createNode('body', { path: '/tests/validation/model' })
        expect(node.pane.model.isValid()).to.be.false
        $('input').val('test').change()
        expect(node.pane.model.isValid()).to.be.true
    })

    test("validation specified on attributes is validated", function (done) {
        var node = T.createNode('body', { path: '/tests/validation/html' })
        
        // knockout.validation parses html attributes asynchronously
        setTimeout(function () {
            expect(node.pane.model.isValid()).to.be.false
            $('input').val('test').change()
            expect(node.pane.model.isValid()).to.be.true
            done()
        })
    })

    test("validation specified on fields is validated", function (done) {
        var node = T.createNode('body', { path: '/tests/validation/field' })

        setTimeout(function () {
            expect(node.pane.model.isValid()).to.be.false
            $('input').val('test').change()
            expect(node.pane.model.isValid()).to.be.true
            done()
        })
    })
})
