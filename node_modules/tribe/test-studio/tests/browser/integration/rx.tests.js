var pubsub = require('tribe.pubsub'),
    uuid = require('node-uuid'),
    Q = require('q')

suite('tribe.browser.integration.rx', function () {
    test("messages property is added to model", function () {
        var id = uuid.v4(),
            node = T.createNode('body', { path: '/tests/rx', scope: { facetId: id } })
        return Q(node.pane.is.rendered).then(function () {
            pubsub.publishSync('topic', { facetId: id, value: 'aa' })
            pubsub.publishSync('topic', { facetId: id, value: 'ab' })
            pubsub.publishSync('topic', { facetId: id, value: 'ba' })
            expect($('li').length).to.equal(2)
        })
    });
});
