require('tribe').register.model(function(pane) {
    var self = this,
    debugWindow = require('../modules/debugWindow'),
    actor,
    channel = pane.pubsub.channel('__test').connect();

    this.initialise = function () {
        return require('tribe').services('Tests').invoke().then(function (options) {
            debugWindow.debugPort = options.debugPort;
            debugWindow.inspectorPort = options.inspectorPort;
            options.fixture = require('../modules/construct').extendFixture(options.fixture);
            actor = channel.startActor(null, '/session', options.fixture);
            self.options = options;
        });        
    };
})