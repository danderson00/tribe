var pubsub = require('tribe.pubsub'),
    actorModule = require('tribe.pubsub/actor'),
    _ = require('underscore');

var actors = module.exports = {
    register: function (path, constructor) {
        actors[path] = {
            constructor: constructor,
            definition: extractDefinition(constructor)
        };
    }
};

function extractDefinition(constructor) {
    var actor = new actorModule(pubsub, constructor);
    return {
        filterName: actor.filterName,
        filterOptions: actor.filterOptions,
        topics: _.keys(actor.handles)
    };
}
    
function createActor(constructor) {
    return new Tribe.PubSub.Actor(pubsub, constructor);
}
