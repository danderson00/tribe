suite('tribe.facets', function () {
    var api = require('tribe/facets');

    test("definitions can be retrieved for registered facets", function () {
        api.register('facetPath', function (facet) {
            facet.isDistributed();
            facet.handles({
                'topic1': function () { },
                'topic2': function () { }
            });
            facet.isScopedTo('property');
        });

        expect(api.definition('facetPath')).to.deep.equal({
            path: '/facetPath',
            expression: [{ p: 'data.property', v: undefined }],
            topics: ['topic1', 'topic2'],
            isDistributed: true,
            dependencies: undefined,
            scope: ['property']
        });

        //expect(api.indexes()).to.deep.equal(['data.property']);
    });

    test("dependencies can be registered by calling facet.requires", function () {
        api.register('parent', function () {
            this.test = 'test';
        });

        api.register('child', function (facet) {
            var parent = facet.requires('parent');
            this.test = parent.test;
        });

        expect(api.definition('child').dependencies).to.deep.equal(['/parent']);
    })
});
