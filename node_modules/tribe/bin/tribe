#! /usr/bin/env node

var optimist = require('optimist'),
    packscript = require('packscript'),
    usage = "Usage:\n    $0 [options]",
    templates = "Templates:\n    basic         The basic project template";
    
var args = optimist
    .usage(usage)
    .describe("install", "Install the specified template or sample to the output directory. If no template is specified, the basic project template will be installed.")
    .describe("output", "The output directory.")
    .describe("help", "These usage instructions")
    .alias("install", "i")
    .alias("output", "o")
    .alias("help", "h")
    .alias("help", "?")
    .default("output", process.cwd())
    .wrap(80)
    .argv;

console.log("Tribe template installer\n");

if (!args.install) {
    console.log(optimist.help());
    console.log(templates);
	return;
}

Pack.api.Log.setLevel('info');
var template = args.install === true ? 'basic' : args.install;
packscript.sync({ directory: __dirname + '/../templates/' + template }).to(args.output);
packscript.pack.all();