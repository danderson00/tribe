var uuid = require('node-uuid'),
    validation = require('./validation')

T.options.events.insertAfter('createModel', 'extendModel')

T.Events.extendModel = function (pane, context) {
    var model = pane.model

    model.uuid = model.uuid || uuid.v4

    // this sort of stuff should really be in separate packages
    model.overlay = model.overlay || function (paneOptions) {
        return function () {
            T.appendNode($('body'), { path: '__overlay', data: paneOptions }, pane.node)
        }
    }

    model.isValid = model.isValid || validation.modelValidator(model)
}
