module.exports = {
    initialize: function () {
        require('knockout.validation')
        require('knockout').validation.init({ 
            parseInputAttributes: true,
            decorateInputElement: true,
            insertMessages: false
        })
    },
    modelValidator: function (model) {
        var isValid = function () {
            model.validators = model.validators || {
                model: ko.validatedObservable(model),
                fields: ko.validatedObservable(model.fields)
            }
            ko.validation.group(model).showAllMessages()
            ko.validation.group(model.fields).showAllMessages()
            return model.validators.model.isValid() && model.validators.fields.isValid() 
        }
        isValid.reset = function () {
            ko.validation.group(model).showAllMessages(false)
            ko.validation.group(model.fields).showAllMessages(false)
        }
        return isValid;
    }
}
