var keyPath = require('../keyPath')

module.exports = function (Query) {
    Query.prototype.select = function (paths) {
        var self = this,
            args = Array.prototype.slice.call(arguments)

        this.type = args.length > 1 ? 'object' : 'scalar'
        this.projections.push(function (value) {
            if(self.type === 'scalar')
                return keyPath(paths, value)
            return args.reduce(attachProperty, {})

            function attachProperty(target, path) {
                target[path] = keyPath(path, value)
                return target
            }
        })
        return this
    }
}
