var keyPath = require('../keyPath');

module.exports = function (Query) {
    Query.prototype.where = function (predicate) {
        this.filters.push(function (object) {
            return Object.keys(predicate).every(valueMatches)

            function valueMatches(key) {
                return keyPath(key, object) === predicate[key]
            }
        })
        return this
    }
}
