// change the text binding to only evaluate the binding string once, not every time the observable changes
// plus add some sugar to automatically call asScalar on Rx observables
var text2DomDataKey = '__tribe__textDomDataKey__',
    oldTextBinding = ko.bindingHandlers.text
ko.bindingHandlers.text = {
    init: function (element, valueAccessor) {
        var value = valueAccessor()
        if(value && value.asScalar) value = value.asScalar()
        ko.utils.domData.set(element, text2DomDataKey, value)
    },
    update: function (element, valueAccessor) {
        return oldTextBinding.update(element, function () { return ko.utils.domData.get(element, text2DomDataKey) })
    }
}
