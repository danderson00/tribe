/*! The Tribe platform is licensed under the MIT license. See http://tribejs.com/ for more information. */
window.Tribe=window.Tribe||{},Tribe.PubSub=function(n){function f(n){function e(t){var r=i("exceptionHandler");if(i("handleExceptions"))try{t(n.data,n)}catch(u){r&&r(u,n)}else t(n.data,n)}for(var f=t.get(n.topic),o=n.sync===!0||r.sync===!0,u=0,s=f.length;u<s;u++)o?e(f[u].handler):function(n){setTimeout(function(){e(n.handler)})}(f[u])}function i(t){return n&&n.hasOwnProperty(t)?n[t]:Tribe.PubSub.options[t]}var r=this,u=Tribe.PubSub.utils,t;this.owner=this,this.sync=i("sync"),t=new Tribe.PubSub.SubscriberList,this.subscribers=t,this.publish=function(n,t){var i=n&&n.topic?n:{topic:n,data:t,sync:!1};return f(i)},this.publishSync=function(n,t){return f({topic:n,data:t,sync:!0})},this.subscribe=function(n,i){return typeof n=="string"?t.add(n,i):u.isArray(n)?u.map(n,function(n){return t.add(n,i)}):u.map(n,function(n,i){return t.add(i,n)})},this.unsubscribe=function(n){var r,i,u;if(Tribe.PubSub.utils.isArray(n)){for(r=[],i=0,u=n.length;i<u;i++)r.push(t.remove(n[i]));return r}return t.remove(n)},this.createLifetime=function(){return new Tribe.PubSub.Lifetime(r,r)}},Tribe.PubSub.Lifetime=function(n,t){function r(n){return Tribe.PubSub.utils.isArray(n)?i=i.concat(n):i.push(n),n}var u=this,i=[];this.owner=t,this.publish=function(t,i){return n.publish(t,i)},this.publishSync=function(t,i){return n.publishSync(t,i)},this.subscribe=function(t,i){var u=n.subscribe(t,i);return r(u)},this.subscribeOnce=function(t,i){var u=n.subscribeOnce(t,i);return r(u)},this.unsubscribe=function(t){return n.unsubscribe(t)},this.end=function(){return n.unsubscribe(i)},this.createLifetime=function(){return new Tribe.PubSub.Lifetime(u,u.owner)}},window.Tribe.PubSub.options={sync:!1,handleExceptions:!0,exceptionHandler:function(n,t){console.log("Exception occurred in subscriber to '"+t.topic+"': "+n.message)}},Tribe.PubSub.Saga=function(n,t){function o(t,i){i!=="onstart"&&i!=="onend"&&(t?t.constructor===Function?n.subscribe(i,s(t)):n.subscribe(i,h(t)):n.subscribe(i,c()))}function s(n){return function(r,f){t.endsChildrenExplicitly||u(r),n(r,f,i)}}function h(n){return function(t){i.startChild({handles:n},t)}}function c(){return function(n){i.end(n)}}function u(n){Tribe.PubSub.utils.each(i.children,function(t){t.end(n)})}var i=this,f=Tribe.PubSub.utils,e,r;n=n.createLifetime(),this.pubsub=n,this.children=[],t.constructor===Function&&(e=[i].concat(Array.prototype.slice.call(arguments,2)),t=f.applyToConstructor(t,e)),r=t.handles||{},this.start=function(n){if(f.each(r,o),r.onstart)r.onstart(n,i);return i},this.startChild=function(t,r){i.children.push(new Tribe.PubSub.Saga(n,t).start(r))},this.end=function(t){if(r.onend)r.onend(t,i);n.end(),u(t)}},Tribe.PubSub.Saga.startSaga=function(n){var t=[this,n].concat(Array.prototype.slice.call(arguments,1)),i=Tribe.PubSub.utils.applyToConstructor(Tribe.PubSub.Saga,t);return i.start()},Tribe.PubSub.prototype.startSaga=Tribe.PubSub.Saga.startSaga,Tribe.PubSub.Lifetime.prototype.startSaga=Tribe.PubSub.Saga.startSaga,Tribe.PubSub.prototype.subscribeOnce=function(n,t){function f(){var i={};return u.each(n,function(n){i[n]=r(t)}),i}function e(){return u.map(n,function(n,t){return i.subscribe(t,r(n))})}function r(n){return function(){i.end(),n.apply(o,arguments)}}var o=this,u=Tribe.PubSub.utils,i=this.createLifetime();return typeof n=="string"?i.subscribe(n,r(t)):u.isArray(n)?i.subscribe(f()):i.subscribe(e())},Tribe.PubSub.SubscriberList=function(){function t(n,t){if(t==="*")return!0;var i="^"+t.replace(/\./g,"\\.").replace(/\*/g,"[^.]*")+"$";return n.match(i)}var n={},i=-1;this.get=function(i){var u=[],r;for(r in n)n.hasOwnProperty(r)&&t(i,r)&&(u=u.concat(n[r]));return u},this.add=function(t,r){var u=(++i).toString();return n.hasOwnProperty(t)||(n[t]=[]),n[t].push({topic:t,handler:r,token:u}),u},this.remove=function(t){var i,r,u;for(i in n)if(n.hasOwnProperty(i))for(r=0,u=n[i].length;r<u;r++)if(n[i][r].token===t)return n[i].splice(r,1),t;return!1}},Tribe.PubSub.utils={},function(n){n.isArray=function(n){return n.constructor===Array},n.applyToConstructor=function(n,t){var i=[null].concat(t),r=n.bind.apply(n,i);return new r};var t=Array.prototype.forEach,i=Array.prototype.map,r={};n.each=function(n,i,u){var f,o,e;if(n!=null)if(t&&n.forEach===t)n.forEach(i,u);else if(n.length===+n.length){for(f=0,o=n.length;f<o;f++)if(i.call(u,n[f],f,n)===r)return}else for(e in n)if(n.hasOwnProperty(e)&&i.call(u,n[e],e,n)===r)return},n.map=function(t,r,u){var f=[];return t==null?f:i&&t.map===i?t.map(r,u):(n.each(t,function(n,t,i){f[f.length]=r.call(u,n,t,i)}),f)}}(Tribe.PubSub.utils),function(n){if(!jQuery)throw"jQuery must be loaded before knockout.composite can initialise";if(!ko)throw"knockout.js must be loaded before knockout.composite can initialise";n.Tribe=n.Tribe||{},n.Tribe.Composite={},n.TC=n.Tribe.Composite,n.TC.Events={},n.TC.Factories={},n.TC.LoadHandlers={},n.TC.LoadStrategies={},n.TC.Loggers={},n.TC.Transitions={},n.TC.Types={},n.TC.Utils={},n.T=n.TC.Utils,$(function(){$("head").append('<style class="__tribe">.__rendering { position: fixed; top: -10000px; left: -10000px; }<\/style>')})}(window||this),TC.defaultOptions=function(){return{synchronous:!1,handleExceptions:!0,basePath:"",loadStrategy:"adhoc",events:["loadResources","createPubSub","createModel","initialiseModel","renderPane","renderComplete","active","dispose"]}},TC.options=TC.defaultOptions(),function(){function n(n){return{init:function(t,i){function f(t){t.which===n&&u(r.val())}var r=$(t),u=i();$.isFunction(u)&&r.keyup(f)}}}ko.bindingHandlers.cssClass={update:function(n,t){var i=t();i&&$(n).addClass(ko.utils.unwrapObservable(i))}},ko.bindingHandlers.enterPressed=n(13),ko.bindingHandlers.escapePressed=n(27)}(),function(n){n.each=function(n,t){return $.each(n||[],function(n,i){return t(i,n)})},n.map=function(t,i){var r=[];return n.each(t||[],function(n,t){r.push(i(n,t))}),r},n.filter=function(n,t){var i=[];return $.each(n||[],function(n,r){t(r,n)&&i.push(r)}),i},n.pluck=function(t,i){return n.map(t,function(n){return n&&n[i]})},n.reduce=function(t,i,r){return n.each(t,function(n,u){i=r(i,n,u,t)}),i}}(TC.Utils),function(){function n(n,t,i){if(!n)throw"Can't embed property in falsy value";n["__"+t]=i}function t(n,t){return n&&n["__"+t]}TC.Utils.embedState=function(t,i,r){n(t,"context",i),n(t,"node",r)},TC.Utils.contextFor=function(n){return n&&TC.Utils.extractContext(ko.contextFor($(n)[0]))},TC.Utils.extractContext=function(n){return n&&t(n.$root,"context")},TC.Utils.extractNode=function(n){return n&&t(n.$root,"node")}}(),function(){TC.Utils.elementDestroyed=function(n){function r(i){i.target===n&&t()}function t(){$(n).off("destroyed",t),$(document).off("DOMNodeRemoved",r),i.resolve()}n.constructor===jQuery&&(n=n[0]);var i=$.Deferred();$(n).on("destroyed",t);$(document).on("DOMNodeRemoved",r);return i},TC.Utils.raiseDocumentEvent=function(n,t){var i=document.createEvent("Event");i.initEvent(n,!0,!1),i.data=t,document.dispatchEvent(i)},TC.Utils.handleDocumentEvent=function(n,t){function i(n){t(n.data,n)}function r(){document.removeEventListener(n,i)}return document.addEventListener(n,i),{dispose:r}}}(),TC.Utils.tryCatch=function(n,t,i,r){if(i)try{n.apply(n,t)}catch(u){TC.logger.error(r,u)}else n.apply(n,t)},function(){TC.Utils.idGenerator=function(){return{next:function(){var n=0;return function(){return arguments[0]==0?(n=1,0):n++}}()}};var n=TC.Utils.idGenerator();TC.Utils.getUniqueId=function(){return n.next()}}(),function(n){n.complete=function(t){function f(t,i){r.push(n.Deferred(function(t){n.when(i).done(function(){u=!0}).always(function(){t.resolve()})}))}var r=[],i=n.Deferred(),u=!1;return n.isArray(t)?n.each(t,f):f(0,t),n.when.apply(n,r).done(function(){u?i.resolve():i.reject()}),i}}(jQuery),function(n){var t=jQuery.cleanData;n.cleanData=function(i){for(var r=0,u;(u=i[r])!==undefined;r++)n(u).triggerHandler("destroyed");t(i)}}(jQuery),TC.Utils.cleanElement=function(n){var t=$.cleanData;$.cleanData=undefined,ko.cleanNode(n),$.cleanData=t},TC.Utils.arguments=function(n){var t={};return $.each(n,function(n,i){t[i.constructor]=i}),{byConstructor:function(n){return t(n)},object:t[Object],string:t[String],"function":t[Function],array:t[Array],number:t[Number]}},TC.Utils.removeItem=function(n,t){var i=$.inArray(t,n);i>-1&&n.splice(i,1)},TC.Utils.inheritOptions=function(n,t,i){for(var r=0,u=i.length;r<u;r++)t[i[r]]=n[i[r]];return t},TC.Utils.cloneData=function(n,t){var u,i,r;if(n){u={};for(i in n)r=n[i],n.hasOwnProperty(i)&&(!t||Array.prototype.indexOf.call(arguments,i)===-1)&&(!r||r.constructor!==Function||ko.isObservable(r))&&(u[i]=ko.utils.unwrapObservable(r));return u}},TC.Utils.normaliseBindings=function(n,t){var i=t();return i.value=n(),!ko.isObservable(i.value)&&$.isFunction(i.value)&&(i.value=i.value()),i},function(){var n=TC.Utils;n.getPaneOptions=function(n,t){var i=n.constructor===String?{path:n}:n;return $.extend({},t,i)},n.bindPane=function(t,i,r,u){var f,e;return u=u||n.contextFor(i)||TC.context(),f=new TC.Types.Pane($.extend({element:$(i)[0]},r)),t.setPane(f),u.renderOperation.add(f),e=new TC.Types.Pipeline(TC.Events,u),e.execute(u.options.events,f),f},n.insertPaneAfter=function(t,i,r,u){var f=$("<div/>").insertAfter(i);return n.bindPane(t,f,r,u)}}(),function(){function n(t){function u(n){return n=f(n),n=e(n),o(n)}function f(n){var t=n.indexOf("://")>-1?n.indexOf("://")+3:0,i=n.substring(0,t),r=n.substring(t);return i+r.replace(/\/{2,}/g,"/")}function e(n){for(var t=/[^\/\.]+\/\.\.\//;n.match(t);)n=n.replace(t,"");return n}function o(n){var t=n.lastIndexOf("../");return t=t==-1?0:t+3,n.substring(0,t)+n.substring(t).replace(/\.\//g,"")}t=t?u(t.toString()):"";var r=t.lastIndexOf("/")+1,i=t.lastIndexOf(".");return{withoutFilename:function(){return n(t.substring(0,r))},filename:function(){return n(t.substring(r))},extension:function(){return i===-1?"":t.substring(i+1)},withoutExtension:function(){return n(i===-1?t:t.substring(0,i))},combine:function(i){return n((t?t+"/":"")+i.toString())},isAbsolute:function(){return t.charAt(0)==="/"||t.indexOf("://")>-1},makeAbsolute:function(){return n("/"+t)},makeRelative:function(){return n(t[0]==="/"?t.substring(1):t)},asMarkupIdentifier:function(){return this.withoutExtension().toString().replace(/\//g,"-").replace(/\./g,"")},setExtension:function(t){return n(this.withoutExtension()+"."+t)},toString:function(){return t.toString()}}}TC.Path=n}(),function(){function n(n){return decodeURIComponent(n.replace(/\+/g," "))}function i(t){return function i(r,u){var e,o,s,h,f;return arguments.length===2?(r=r.split(t),i(n(r.shift()),n(r.join(t)),!0)):(r=r.replace(/^\s+|\s+$/g,""),u.constructor===String&&(u=u.replace(/^\s+|\s+$/g,""),isNaN(u)||(o=+u,u===o.toString(10)&&(u=o))),e=/(.*)\[([^\]]*)\]$/.exec(r),!e)?(f={},r&&(f[r]=u),f):(h=e[2],s=e[1],!h)?i(s,[u],!0):(f={},f[h]=u,i(s,f,!0))}}function t(n,t){return n?$.isArray(n)?n.concat(t):!$.isPlainObject(n)||!$.isPlainObject(t)?[n].concat(t):r(n,t):t}function r(n,i){for(var r in i)r&&i.hasOwnProperty(r)&&(n[r]=t(n[r],i[r]));return n}TC.Utils.Querystring=TC.Utils.Querystring||{},TC.Utils.Querystring.parse=function(n,r,u){function f(){n.length>0&&n[0]==="?"&&(n=n.substring(1))}return f(),TC.Utils.reduce(TC.Utils.map(n.split(r||"&"),i(u||"=")),{},t)}}(),function(){function t(i,r,u,f){r=r||{},f=f||[];var s,h,e,c,l,o,a=r.seperator||"&",v=r.eqSymbol||"=",y=r.arrayKey!==!1;if(i===null||i===undefined||i.constructor===Function)return u?n(u)+v:"";if((i.constructor===Boolean||Object.prototype.toString.call(i)==="[object Boolean]")&&(i=+i),!isNaN(i)||i.constructor===String)return n(u)+v+n(i);if($.isArray(i)){for(o=[],u=y?u+"[]":u,e=0,c=i.length;e<c;e++)o.push(t(i[e],r,u,f));return o.join(a)}for(e=f.length-1;e>=0;--e)if(f[e]===i)throw new Error("TC.Utils.Querystring.stringify: cyclical reference");f.push(i),o=[],s=u?u+"[":"",h=u?"]":"";for(e in i)i.hasOwnProperty(e)&&(l=s+e+h,o.push(t(i[e],r,l,f)));return(f.pop(),o=o.join(a),!o&&u)?u+"=":o}TC.Utils.Querystring=TC.Utils.Querystring||{};var n=encodeURIComponent;TC.Utils.Querystring.stringify=function(n,i){return t(n,i)}}(),function(){TC.Types.Flow=function(n,t){function u(){if(n.constructor===TC.Types.Node)return n.findNavigation().node;if(n.constructor===TC.Types.Pane)return n.node.findNavigation().node;throw new Error("navigationSource must be either TC.Types.Pane or TC.Types.Node");}var i=this,r;this.node=u(),this.pubsub=this.node.pane.pubsub.owner,this.sagas=[],t.constructor===Function&&(r=[i].concat(Array.prototype.slice.call(arguments,2)),t=Tribe.PubSub.utils.applyToConstructor(t,r)),this.saga=new Tribe.PubSub.Saga(this.pubsub,t),this.start=function(n){return i.saga.start(n),i},this.end=function(n){return i.saga.end(n),TC.Utils.each(i.sagas,function(t){t.end(n)}),i}},TC.Types.Flow.prototype.navigate=function(n,t){this.node.navigate(n,t)},TC.Types.Flow.prototype.to=function(n,t){var i=this.node;return function(){i.navigate(n,t)}},TC.Types.Flow.prototype.endsAt=function(n,t){var i=this;return function(){i.node.navigate(n,t),i.end()}},TC.Types.Flow.prototype.startSaga=function(){var n=this.pubsub.startSaga.apply(this.pubsub,arguments);return this.sagas.push(n),n},TC.Types.Flow.startFlow=function(n){var t=[this,n].concat(Array.prototype.slice.call(arguments,1)),i=Tribe.PubSub.utils.applyToConstructor(TC.Types.Flow,t);return i.start()}}(),TC.Types.History=function(n){function u(n){n.state!==null&&r(n)}var t=0,i,r;n.replaceState(t,window.title),i={raiseEvent:function(n){TC.Utils.raiseDocumentEvent("browser.go",{count:n.state-t}),t=n.state},updateStack:function(n){t=n.state,r=i.raiseEvent}},r=i.raiseEvent,window.addEventListener("popstate",u),this.navigate=function(i){i=i||{},n.pushState(++t,i.title,i.url)},this.go=function(t){n.go(t)},this.update=function(t){r=i.updateStack,n.go(t)},this.dispose=function(){window.removeEventListener("popstate",u)}},TC.history=window.history.pushState?new TC.Types.History(window.history):new TC.Types.History({replaceState:function(){},pushState:function(){},go:function(){}}),TC.Types.Loader=function(){var t=this,n={};this.get=function(t,i,r){var f,e,u;return n[t]!==undefined?n[t]:(f=TC.Path(t).extension().toString(),e=TC.LoadHandlers[f],e)?(u=e(t,i,r),n[t]=u,$.when(u).always(function(){n[t]=null}),u):(TC.logger.warn("Resource of type "+f+" but no handler registered."),null)}},TC.Types.Logger=function(){function n(n,u){t<=n&&TC.Loggers[i](r[n],u)}var t=0,i="console",r={0:"debug",1:"info",2:"warn",3:"error",4:"none"};this.debug=function(t){n(0,t)},this.info=function(t){n(1,t)},this.warn=function(t){n(2,t)},this.error=function(t,i){var r;r=i&&i.stack?t+" "+i.stack:i&&i.message?t+" "+i.message:t+" "+(i?i:""),n(3,r)},this.setLogLevel=function(n){$.each(r,function(i,r){n===r&&(t=i)})},this.setLogger=function(n){i=n}},TC.logger=new TC.Types.Logger,TC.Types.Models=function(){},TC.Types.Models.prototype.register=function(n,t,i){this[n]={constructor:t,options:i||{}},TC.logger.debug("Model loaded for "+n)},TC.Types.Navigation=function(n,t){function u(n){f(n.data.count)}function f(n){var t=r+n;t<0&&(t=0),t>=i.length&&(t=i.length-1),t!=r&&e(i[t],n<0),r=t}function e(i,r){TC.Utils.raiseDocumentEvent("navigating",{node:n,options:i,browserData:t.browserData}),n.transitionTo(i,t.transition,r)}function o(){i.splice(r+1,i.length)}function s(){t=t||{},t.constructor===String&&(t={transition:t}),t.browser===!0&&(t.browser=TC.options.defaultUrlProvider)}function h(){var i=t.browser&&t.browser.paneOptionsFrom(window.location.search);i&&(n.pane.path=i.path,n.pane.data=i.data)}function c(){return{path:n.pane.path,data:n.pane.data}}s(),h();var i=[c()],r=0;this.node=n,this.stack=i,this.navigate=function(n){t.browser&&TC.history.navigate(t.browser&&t.browser.urlDataFrom(n)),o(),i.push(n),r++,e(n)},this.isAtStart=function(){return r===0},this.go=function(n){f(n),t.browser&&TC.history.update(n)},t.browser&&document.addEventListener("browser.go",u),this.dispose=function(){document.removeEventListener("browser.go",u)}},TC.Types.Node=function(n,t){this.parent=n,this.children=[],this.root=n?n.root:this,this.id=TC.Utils.getUniqueId(),n&&n.children.push(this),t&&this.setPane(t)},TC.Types.Node.prototype.navigate=function(n,t){var i=TC.Utils.getPaneOptions(n,{data:t});TC.Path(i.path).isAbsolute()||(i.path=TC.Path(this.nodeForPath().pane.path).withoutFilename().combine(i.path).toString()),this.findNavigation().navigate(i)},TC.Types.Node.prototype.navigateBack=function(){this.findNavigation().go(-1)},TC.Types.Node.prototype.findNavigation=function(){return this.defaultNavigation?this.defaultNavigation:this.navigation?this.navigation:this.parent?this.parent.findNavigation():(this.navigation=new TC.Types.Navigation(this),this.navigation)},TC.Types.Node.prototype.transitionTo=function(n,t,i){TC.transition(this,t,i).to(n)},TC.Types.Node.prototype.setPane=function(n){this.pane&&(this.pane.node=null),n.node=this,this.pane=n,this.skipPath=n.skipPath,n.handlesNavigation&&(this.navigation=new TC.Types.Navigation(this,n.handlesNavigation),this.root.defaultNavigation=this.root.defaultNavigation||this.navigation),n.inheritPathFrom(this.parent)},TC.Types.Node.prototype.nodeForPath=function(){return this.skipPath&&this.parent?this.parent.nodeForPath():this},TC.Types.Node.prototype.dispose=function(){this.root.defaultNavigation===this.navigation&&(this.root.defaultNavigation=null),this.parent&&TC.Utils.removeItem(this.parent.children,this),this.pane&&this.pane.dispose&&(delete this.pane.node,this.pane.dispose())},TC.Types.Node.prototype.startFlow=TC.Types.Flow.startFlow,TC.Types.Operation=function(){var t=this,n=[];this.promise=$.Deferred(),this.add=function(t){n.push(t)},this.complete=function(i){TC.Utils.removeItem(n,i),n.length===0&&t.promise.resolve()}},TC.Types.Pane=function(n){TC.Utils.inheritOptions(n,this,["path","data","element","transition","reverseTransitionIn","handlesNavigation","pubsub","id","skipPath"]),this.is={rendered:$.Deferred(),disposed:$.Deferred()}},TC.Types.Pane.prototype.navigate=function(n,t){this.node&&this.node.navigate(n,t)},TC.Types.Pane.prototype.navigateBack=function(){this.node&&this.node.navigateBack()},TC.Types.Pane.prototype.remove=function(){$(this.element).remove()},TC.Types.Pane.prototype.dispose=function(){this.model&&this.model.dispose&&this.model.dispose(),this.node&&(delete this.node.pane,this.node.dispose()),this.element&&TC.Utils.cleanElement(this.element)},TC.Types.Pane.prototype.inheritPathFrom=function(n){n=n&&n.nodeForPath();var i=n&&n.pane,t=TC.Path(this.path);this.path=t.isAbsolute()||!i?t.makeAbsolute().toString():TC.Path(i.path).withoutFilename().combine(t).toString()},TC.Types.Pane.prototype.find=function(n){return $(this.element).find(n)},TC.Types.Pane.prototype.startRender=function(){$(this.element).addClass("__rendering")},TC.Types.Pane.prototype.endRender=function(){$(this.element).removeClass("__rendering")},TC.Types.Pane.prototype.toString=function(){return"{ path: '"+this.path+"' }"},TC.Types.Pane.prototype.startFlow=TC.Types.Flow.startFlow,TC.Types.Pipeline=function(n,t){this.execute=function(i,r){function e(){function h(){f.reject();var n=r?r.toString():"empty target";TC.logger.error("An error occurred in the '"+o+"' event for "+n)}if(u++,u>=i.length){f.resolve();return}var o=i[u],s=n[o];if(!s){TC.logger.warn("No event defined for "+o),e();return}$.when(s(r,t)).done(e).fail(h)}var u=-1,f=$.Deferred();return e(),f}},TC.Types.Templates=function(){var n=this;this.store=function(n,t){var r=TC.Path(t).asMarkupIdentifier().toString(),i=$(n);i.is("script")?$("head").append(i.filter("script")):$('<script type="text/template" class="__tribe" id="template-'+r+'"><\/script>').text(n).appendTo("head")},this.loaded=function(n){return $("head script#template-"+TC.Path(n).asMarkupIdentifier()).length>0},this.render=function(n,t){var i=TC.Path(t).asMarkupIdentifier();$(n).empty().append($("head script#template-"+i).html())}},TC.Events.active=function(n){return TC.Utils.elementDestroyed(n.element)},TC.Events.createModel=function(n,t){var i=t.models[n.path],r=i&&i.constructor?new i.constructor(n):{pane:n,data:n.data};TC.Utils.embedState(r,t,n.node),n.model=r},TC.Events.createPubSub=function(n,t){t.pubsub&&(n.pubsub=t.pubsub.createLifetime?t.pubsub.createLifetime():t.pubsub)},TC.Events.dispose=function(n){n.pubsub&&n.pubsub.end&&n.pubsub.end(),n.dispose(),n.is.disposed.resolve()},TC.Events.initialiseModel=function(n){return n.model.initialise?n.model.initialise():null},TC.Events.loadResources=function(n,t){var i=TC.LoadStrategies[t.options.loadStrategy];if(!i)throw"Unknown resource load strategy";return i(n,t)},TC.Events.renderComplete=function(n,t){function i(){n.model.renderComplete&&n.model.renderComplete(),n.is.rendered.resolve(),TC.Utils.raiseDocumentEvent("renderComplete",n),t.renderOperation=new TC.Types.Operation}$.when(TC.transition(n,n.transition,n.reverseTransitionIn).in()).done(i),setTimeout(function(){n.endRender()})},TC.Events.renderPane=function(n,t){function r(){ko.applyBindingsToDescendants(n.model,n.element)}var i=t.renderOperation;return n.startRender(),t.templates.render(n.element,n.path),TC.Utils.tryCatch(r,null,t.options.handleExceptions,"An error occurred applying the bindings for "+n.toString()),n.model.paneRendered&&n.model.paneRendered(),i.complete(n),i.promise},TC.LoadHandlers.js=function(n,t,i){function r(r){TC.scriptEnvironment={url:n,resourcePath:t,context:i},TC.Utils.tryCatch($.globalEval,[u(r)],i.options.handleExceptions,"An error occurred executing script loaded from "+n+(t?" for resource "+t:"")),delete TC.scriptEnvironment,TC.logger.debug("Loaded script from "+n)}function u(t){return t+"\n//@ sourceURL=tribe://Application/"+n.replace(/ /g,"_")}return $.ajax({url:n,dataType:"text",async:!i.options.synchronous,cache:!1,success:r})},TC.LoadHandlers.css=function(n,t,i){function r(n){$("<style/>").attr("id",t?"style-"+TC.Path(t).asMarkupIdentifier():null).attr("class","__tribe").text(n).appendTo("head")}return $.ajax({url:n,dataType:"text",async:!i.options.synchronous,cache:!1,success:r})},TC.LoadHandlers.htm=function(n,t,i){function r(n){i.templates.store(n,t)}return $.ajax({url:n,dataType:"html",async:!i.options.synchronous,cache:!1,success:r})},TC.LoadHandlers.html=TC.LoadHandlers.htm,TC.LoadStrategies.adhoc=function(n,t){var i,r;return t.loadedPanes[n.path]!==undefined?t.loadedPanes[n.path]:(i=TC.Path(t.options.basePath).combine(TC.Path(n.path).makeRelative()),t.templates.loaded(n.path)||t.models[n.path])?null:(r=$.complete([t.loader.get(i.setExtension("js").toString(),n.path,t),t.loader.get(i.setExtension("htm").toString(),n.path,t),t.loader.get(i.setExtension("css").toString(),n.path,t)]),t.loadedPanes[n.path]=r,$.when(r).fail(function(){TC.logger.error("Unable to load resources for '"+n.path+"'.")}).always(function(){t.loadedPanes[n.path]=null}),r)},TC.LoadStrategies.preloaded=function(n,t){return!t.models[n.path]&&!t.templates.loaded(n.path)?(TC.logger.error("No resources loaded for '"+n.path+"'."),$.Deferred().reject()):null},TC.transition=function(n,t,i){function o(){var n=$(r);TC.transition.mode==="fixed"?n.css({position:"fixed",width:n.width(),left:n.offset().left,top:n.offset().top}):n.css({position:"absolute",width:n.width(),left:n.position().left,top:n.position().top})}function s(){if(!n)throw"No target passed to TC.transition";n.constructor===TC.Types.Node?(f=n,e=f.pane,r=e.element):n.constructor===TC.Types.Pane?(e=n,f=e.node,r=e.element):r=n}var f,e,r,u;return s(),t=t||e&&e.transition||f&&f.transition,u=TC.Transitions[t],i&&u&&u.reverse&&(u=TC.Transitions[u.reverse]),{"in":function(){return $(r).show(),u&&u.in(r)},out:function(n){function i(){n===!1?$(r).hide().attr("style",""):$(r).remove()}o();var t=u&&u.out(r);return $.when(t).done(i),t},to:function(n,u){var e=TC.context();return f?TC.Utils.insertPaneAfter(f,r,TC.Utils.getPaneOptions(n,{transition:t,reverseTransitionIn:i}),e):TC.insertNodeAfter(r,TC.Utils.getPaneOptions(n,{transition:t,reverseTransitionIn:i}),null,e),this.out(u),e.renderOperation.promise}}},function(){function n(n,r){function u(n){setTimeout(function(){$(n).addClass("trigger")},30)}function f(i,r,u){return function(){$(i).unbind(t).removeClass(n+" in out prepare trigger"),u&&$(i).hide(),r.resolve()}}TC.Transitions[n]={"in":function(r){if(!i)return null;var e=$.Deferred();return $(r).bind(t,f(r,e)).addClass("prepare in "+n),u(r),e},out:function(r){if(!i)return null;var e=$.Deferred();$(r).addClass("prepare out "+n).on(t,f(r,e,!0));return u(r),e},reverse:r||n}}function r(){var f=document.body||document.documentElement,i=f.style,n="transition",r=["Moz","Webkit","Khtml","O","ms"],t,u;if(typeof i[n]=="string")return!0;for(n=n.charAt(0).toUpperCase()+n.substr(1),t=0,u=r.length;t<u;t++)if(typeof i[r[t]+n]=="string")return!0;return!1}var i=r(),t;n("fade"),n("slideLeft","slideRight"),n("slideRight","slideLeft"),n("slideUp","slideDown"),n("slideDown","slideUp"),t="webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd"}(),$("<style/>").attr("class","__tribe").text(".trigger{-webkit-transition:all 250ms ease-in-out;transition:all 250ms ease-in-out}.fade.in.prepare{opacity:0}.fade.in.trigger{opacity:1}.fade.out.prepare{opacity:1}.fade.out.trigger{opacity:0}.slideRight.in.prepare{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.slideRight.in.trigger{-webkit-transform:translateX(0);transform:translateX(0)}.slideRight.out.trigger{-webkit-transform:translateX(100%);transform:translateX(100%)}.slideLeft.in.prepare{-webkit-transform:translateX(100%);transform:translateX(100%)}.slideLeft.in.trigger{-webkit-transform:translateX(0);transform:translateX(0)}.slideLeft.out.trigger{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.slideDown.in.prepare{-webkit-transform:translateY(-100%);transform:translateY(-100%)}.slideDown.in.trigger{-webkit-transform:translateY(0);transform:translateY(0)}.slideDown.out.trigger{-webkit-transform:translateY(100%);transform:translateY(100%)}.slideUp.in.prepare{-webkit-transform:translateY(100%);transform:translateY(100%)}.slideUp.in.trigger{-webkit-transform:translateY(0);transform:translateY(0)}.slideUp.out.trigger{-webkit-transform:translateY(-100%);transform:translateY(-100%)}").appendTo("head"),function(){TC.registerModel=function(){var t=TC.scriptEnvironment||{},i=t.context||TC.context(),n=TC.Utils.arguments(arguments),r=n.function,u=n.object,f=n.string||t.resourcePath;i.models.register(f,r,u)},TC.run=function(n,t){var u,i,r,f;if(n){if(u=[],i=TC.context(),$.isArray(n))for(r=0,f=n.length;r<f;r++)e(n[r]);else n.constructor===String&&e(n);function e(n){u.push(i.loader.get(TC.Path(i.options.basePath).combine(n).toString(),null,i))}return $.when.apply(null,u).done(function(){ko.applyBindings(t)})}ko.applyBindings(t)}}(),function(){var n;TC.context=function(t){n=n||{models:new TC.Types.Models,loader:new TC.Types.Loader,options:TC.options,templates:new TC.Types.Templates,loadedPanes:{},pubsub:Tribe.PubSub&&new Tribe.PubSub({sync:TC.options.synchronous,handleExceptions:TC.options.handleExceptions})};var i={renderOperation:new TC.Types.Operation};return $.extend({},n,i,t)}}(),TC.options.defaultUrlProvider={urlDataFrom:function(){return null},paneOptionsFrom:function(){return null}},function(){var n=TC.Utils;TC.createNode=function(t,i,r,u){r=r||TC.nodeFor(t),u=u||n.contextFor(t)||TC.context();var f=new TC.Types.Node(r);return n.bindPane(f,t,i,u),f},TC.appendNode=function(n,t,i,r){var u=$("<div/>").appendTo(n);return TC.createNode(u,t,i,r)},TC.insertNodeAfter=function(n,t,i,r){var u=$("<div/>").insertAfter(n);return TC.createNode(u,t,i||TC.nodeFor(n),r)},TC.nodeFor=function(n){return n&&TC.Utils.extractNode(ko.contextFor($(n)[0]))}}(),ko.bindingHandlers.navigate={init:function(n,t,i,r){function o(){return function(){f.navigate(u.value,TC.Utils.cloneData(u.data))}}var f=TC.nodeFor(n),u,e;f&&(u=TC.Utils.normaliseBindings(t,i),e=ko.bindingHandlers.validatedClick||ko.bindingHandlers.click,e.init(n,o,i,r))}},ko.bindingHandlers.navigateBack={init:function(n,t,i,r){function f(){return function(){u.navigateBack()}}var u=TC.nodeFor(n);u&&ko.bindingHandlers.click.init(n,f,i,r)}},function(){function n(n,t,i,r,u){function f(){return TC.Utils.getPaneOptions(ko.utils.unwrapObservable(t()),i())}return TC.createNode(n,f(),TC.Utils.extractNode(u),TC.Utils.extractContext(u)),{controlsDescendantBindings:!0}}ko.bindingHandlers.pane={init:n}}(),ko.bindingHandlers.publish={init:function(n,t,i,r){function o(){return function(){f.publish(u.value,TC.Utils.cloneData(u.data))}}var f=TC.nodeFor(n).pane.pubsub,u,e;f&&(u=TC.Utils.normaliseBindings(t,i),e=ko.bindingHandlers.validatedClick||ko.bindingHandlers.click,e.init(n,o,i,r))}},TC.Loggers.console=function(n,t){window.console&&window.console.log&&window.console.log(n.toUpperCase()+": "+t)};