!function(){var e=4,t={debug:4,info:3,warn:2,error:1,none:0},n={setLevel:function(n){e=t[n],void 0===e&&(e=4)},debug:function(t){e>=4&&console.log("DEBUG: "+t)},info:function(t){e>=3&&console.info("INFO: "+t)},warn:function(t){e>=2&&console.warn("WARN: "+t)},error:function(t,i){e>=1&&console.error("ERROR: "+t+"\n",n.errorDetails(i))},errorDetails:function(e){return e?e.constructor===String?e:(e.stack||"")+(e.inner?"\n\n"+this.errorDetails(e.inner):"\n"):""}};n.log=n.debug,"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=n:("undefined"==typeof T&&(T={}),T.logger=n)}(),function(){var e;"undefined"!=typeof window&&(e=window.ko),"undefined"!=typeof require&&(e=require("knockout"));var t={serialize:function(e){return JSON.stringify(this.extractMetadata(e))},extractMetadata:function(t){function n(){r.observables=[];for(var t in i)i.hasOwnProperty(t)&&e.isObservable(i[t])&&(i[t]=i[t](),r.observables.push(t))}var i=t,r={};return n(),{target:i,metadata:r}},deserialize:function(e){return e=JSON.parse(e),e.target?this.applyMetadata(e.target,e.metadata):e},applyMetadata:function(t,n){function i(){for(var e=n.observables,t=0,i=e.length;i>t;t++)r(e[t])}function r(e){t[e]=a(t[e])}function a(t){return t.constructor===Array?e.observableArray(t):e.observable(t)}return n&&i(),t}};"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=t:("undefined"==typeof T&&(T={}),T.serializer=t)}(),"undefined"==typeof Tribe&&(Tribe={}),Tribe.PubSub=function(e){function t(e){function t(t){var n=i("exceptionHandler");if(i("handleExceptions")&&n)try{t(e.data,e)}catch(r){n(r,e)}else t(e.data,e)}for(var n=o.get(e.topic),a=e.sync===!0||r.sync===!0,s=0,u=n.length;u>s;s++)a?t(n[s].handler):!function(e){setTimeout(function(){t(e.handler)})}(n[s])}function n(e,t){return e&&e.topic?e:{topic:e,data:t}}function i(e){return r.options.hasOwnProperty(e)?r.options[e]:Tribe.PubSub.options[e]}var r=this,a=Tribe.PubSub.utils;this.owner=this,this.options=e||{},this.sync=i("sync");var o=new Tribe.PubSub.SubscriberList;this.subscribers=o,this.publish=function(e,i){return t(n(e,i))},this.publishSync=function(e,i){var r=n(e,i);return r.sync=!0,t(r)},this.subscribe=function(e,t){return"string"==typeof e?o.add(e,t):a.isArray(e)?a.map(e,function(e){return o.add(e,t)}):a.map(e,function(e,t){return o.add(t,e)})},this.unsubscribe=function(e){if(Tribe.PubSub.utils.isArray(e)){for(var t=[],n=0,i=e.length;i>n;n++)t.push(o.remove(e[n]));return t}return o.remove(e)},this.createLifetime=function(){return new Tribe.PubSub.Lifetime(r,r)},this.channel=function(e){return new Tribe.PubSub.Channel(r,e)}},Tribe.PubSub.Channel=function(e,t){function n(e,n){var i=e&&e.topic?e:{topic:e,data:n};return i.channelId=t,i}function i(e){return function(n,i){i.channelId===t&&e(n,i)}}var r=this;e=e.createLifetime(),this.id=t,this.owner=e.owner,this.publish=function(t,i){return e.publish(n(t,i))},this.publishSync=function(t,i){return e.publishSync(n(t,i))},this.subscribe=function(t,n){return e.subscribe(t,i(n))},this.subscribeOnce=function(t,n){return e.subscribeOnce(t,i(n))},this.unsubscribe=function(t){return e.unsubscribe(t)},this.end=function(){return e.end()},this.createLifetime=function(){return new Tribe.PubSub.Lifetime(r,r.owner)}},Tribe.PubSub.Lifetime=function(e,t){function n(e){return Tribe.PubSub.utils.isArray(e)?r=r.concat(e):r.push(e),e}var i=this,r=[];this.owner=t,this.publish=function(t,n){return e.publish(t,n)},this.publishSync=function(t,n){return e.publishSync(t,n)},this.subscribe=function(t,i){var r=e.subscribe(t,i);return n(r)},this.subscribeOnce=function(t,i){var r=e.subscribeOnce(t,i);return n(r)},this.unsubscribe=function(t){return e.unsubscribe(t)},this.channel=function(e){return new Tribe.PubSub.Channel(i,e)},this.end=function(){return e.unsubscribe(r)},this.createLifetime=function(){return new Tribe.PubSub.Lifetime(i,i.owner)}},Tribe.PubSub.options={sync:!1,handleExceptions:!0,exceptionHandler:function(e,t){"undefined"!=typeof console&&console.log("Exception occurred in subscriber to '"+t.topic+"': "+e.message)}},Tribe.PubSub.Saga=function(e,t){function n(){t&&(t.constructor===Function?t(i):Tribe.PubSub.utils.copyProperties(t,i,["handles","endsChildrenExplicitly"]))}var i=this,r=Tribe.PubSub.utils;e=e.createLifetime(),this.pubsub=e,this.children=[],n();var a=this.handles||{};this.topics=Object.keys(a),this.start=function(e){return r.each(a,i.addHandler,i),a.onstart&&a.onstart(e,i),i},this.startChild=function(t,n){return i.children.push(new Tribe.PubSub.Saga(e,t).start(n)),i},this.join=function(e,t){return r.each(a,i.addHandler,i),i.data=e,a.onjoin&&a.onjoin(t,i),i},this.end=function(t){return a.onend&&a.onend(t,i),e.end(),i.endChildren(t),i},this.endChildren=function(e){Tribe.PubSub.utils.each(i.children,function(t){t.end(e)})}},Tribe.PubSub.Saga.startSaga=function(e,t){return new Tribe.PubSub.Saga(this,e).start(t)},Tribe.PubSub.prototype.startSaga=Tribe.PubSub.Saga.startSaga,Tribe.PubSub.Lifetime.prototype.startSaga=Tribe.PubSub.Saga.startSaga,Tribe.PubSub.Saga.prototype.addHandler=function(e,t){function n(e){return function(t,n){a.endsChildrenExplicitly||a.endChildren(t),e(t,n,a)}}function i(e){return function(t){a.startChild({handles:e},t)}}function r(){return function(e){a.end(e)}}var a=this;"onstart"!==t&&"onend"!==t&&"onjoin"!==t&&(e?e.constructor===Function?this.pubsub.subscribe(t,n(e)):this.pubsub.subscribe(t,i(e)):this.pubsub.subscribe(t,r()))},Tribe.PubSub.prototype.subscribeOnce=function(e,t){function n(){var n={};return o.each(e,function(e){n[e]=r(t)}),n}function i(){return o.map(e,function(e,t){return s.subscribe(t,r(e))})}function r(e){return function(){s.end(),e.apply(a,arguments)}}var a=this,o=Tribe.PubSub.utils,s=this.createLifetime();return"string"==typeof e?s.subscribe(e,r(t)):o.isArray(e)?s.subscribe(n()):s.subscribe(i())},Tribe.PubSub.SubscriberList=function(){function e(e,t){if("*"===t)return!0;var n="^"+t.replace(/\./g,"\\.").replace(/\*/g,"[^.]*")+"$";return e.match(n)}var t={},n=-1;this.get=function(n){var i=[];for(var r in t)t.hasOwnProperty(r)&&e(n,r)&&(i=i.concat(t[r]));return i},this.add=function(e,i){var r=(++n).toString();return t.hasOwnProperty(e)||(t[e]=[]),t[e].push({topic:e,handler:i,token:r}),r},this.remove=function(e){for(var n in t)if(t.hasOwnProperty(n))for(var i=0,r=t[n].length;r>i;i++)if(t[n][i].token===e)return t[n].splice(i,1),e;return!1}},Tribe.PubSub.utils={},function(e){e.isArray=function(e){return e.constructor===Array};var t=Array.prototype.forEach,n=Array.prototype.map,i={};e.each=function(e,n,r){if(null!=e)if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===+e.length){for(var a=0,o=e.length;o>a;a++)if(n.call(r,e[a],a,e)===i)return}else for(var s in e)if(e.hasOwnProperty(s)&&n.call(r,e[s],s,e)===i)return},e.map=function(t,i,r){var a=[];return null==t?a:n&&t.map===n?t.map(i,r):(e.each(t,function(e,t,n){a[a.length]=i.call(r,e,t,n)}),a)},e.copyProperties=function(e,t,n){for(var i=0,r=n.length;r>i;i++){var a=n[i];e.hasOwnProperty(a)&&(t[a]=e[a])}}}(Tribe.PubSub.utils),"undefined"!=typeof module&&(module.exports=new Tribe.PubSub),function(e){if("undefined"==typeof jQuery)throw"jQuery must be loaded before knockout.composite can initialise";if("undefined"==typeof ko)throw"knockout.js must be loaded before knockout.composite can initialise";if("undefined"==typeof T)throw"Tribe.Common must be loaded before knockout.composite can initialise";e.T=T||{},e.T.Events={},e.T.Factories={},e.T.LoadHandlers={},e.T.LoadStrategies={},e.T.Transitions={},e.T.Types={},e.T.Utils={},e.T.logger=T.logger,e.T.pubsub=new Tribe.PubSub,$(function(){$("head").append('<style class="__tribe">.__rendering { position: fixed; top: -10000px; left: -10000px; }</style>')})}(window||this),T.defaultOptions=function(){return{synchronous:!1,handleExceptions:!0,basePath:"",loadStrategy:"adhoc",events:["loadResources","createPubSub","createModel","initialiseModel","renderPane","renderComplete","active","dispose"]}},T.options=T.defaultOptions(),function(){function e(e){return{init:function(t,n){function i(t){t.which===e&&a(r.val())}var r=$(t),a=n();$.isFunction(a)&&r.keyup(i)}}}ko.bindingHandlers.cssClass={update:function(e,t){var n=t();n&&$(e).addClass(ko.utils.unwrapObservable(n))}},ko.bindingHandlers.enterPressed=e(13),ko.bindingHandlers.escapePressed=e(27)}(),function(e){e.each=function(e,t){return $.each(e||[],function(e,n){return t(n,e)})},e.map=function(t,n){var i=[];return e.each(t||[],function(e,t){i.push(n(e,t))}),i},e.filter=function(e,t){var n=[];return $.each(e||[],function(e,i){t(i,e)&&n.push(i)}),n},e.pluck=function(t,n){return e.map(t,function(e){return e&&e[n]})},e.reduce=function(t,n,i){return e.each(t,function(e,r){n=i(n,e,r,t)}),n}}(T.Utils),T.Utils.deparam=function(e,t){var n=decodeURIComponent,i={},r={"true":!0,"false":!1,"null":null};return $.each(e.replace(/\+/g," ").split("&"),function(e,a){var o,s=a.split("="),u=n(s[0]),l=i,c=0,d=u.split("]["),p=d.length-1;if(/\[/.test(d[0])&&/\]$/.test(d[p])?(d[p]=d[p].replace(/\]$/,""),d=d.shift().split("[").concat(d),p=d.length-1):p=0,2===s.length)if(o=n(s[1]),t&&(o=o&&!isNaN(o)?+o:"undefined"===o?void 0:void 0!==r[o]?r[o]:o),p)for(;p>=c;c++)u=""===d[c]?l.length:d[c],l=l[u]=p>c?l[u]||(d[c+1]&&isNaN(d[c+1])?{}:[]):o;else $.isArray(i[u])?i[u].push(o):i[u]=void 0!==i[u]?[i[u],o]:o;else u&&(i[u]=t?void 0:"")}),i},function(){function e(e,t,n){if(!e)throw"Can't embed property in falsy value";e["__"+t]=n}function t(e,t){return e&&e["__"+t]}T.Utils.embedState=function(t,n,i){e(t,"context",n),e(t,"node",i)},T.Utils.contextFor=function(e){return e&&T.Utils.extractContext(ko.contextFor($(e)[0]))},T.Utils.extractContext=function(e){return e&&t(e.$root,"context")},T.Utils.extractNode=function(e){return e&&t(e.$root,"node")}}(),function(){T.Utils.elementDestroyed=function(e){function t(t){t.target===e&&n()}function n(){$(e).off("destroyed",n),$(document).off("DOMNodeRemoved",t),i.resolve()}e.constructor===jQuery&&(e=e[0]);var i=$.Deferred();return $(e).on("destroyed",n),$(document).on("DOMNodeRemoved",t),i},T.Utils.raiseDocumentEvent=function(e,t){var n=$.Event(e);n.eventData=t,$(document).trigger(n)};var e={};T.Utils.handleDocumentEvent=function(t,n){function i(e){n(e.originalEvent||e)}$(document).on(t,i),e[n]=i},T.Utils.detachDocumentEvent=function(t,n){$(document).off(t,e[n]),delete e[n]}}(),T.Utils.tryCatch=function(e,t,n,i){if(n)try{e.apply(this,t||[])}catch(r){T.logger.error(i,r)}else e.apply(this,t||[])},function(){T.Utils.idGenerator=function(){return{next:function(){var e=0;return function(){return 0==arguments[0]?(e=1,0):e++}}()}};var e=T.Utils.idGenerator();T.Utils.getUniqueId=function(){return e.next()}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var t,n,i=Object(this),r=i.length>>>0;if(0===r)return-1;if(t=0,arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&1/0!=t&&t!=-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=r)return-1;for(n=t>=0?t:Math.max(r-Math.abs(t),0);r>n;n++)if(n in i&&i[n]===e)return n;return-1}),function(e){e.complete=function(t){function n(t,n){i.push(e.Deferred(function(t){e.when(n).done(function(){a=!0}).always(function(){t.resolve()})}))}var i=[],r=e.Deferred(),a=!1;return e.isArray(t)?e.each(t,n):n(0,t),e.when.apply(e,i).done(function(){a?r.resolve():r.reject()}),r}}(jQuery),function(e){var t=jQuery.cleanData;e.cleanData=function(n){for(var i,r=0;void 0!==(i=n[r]);r++)e(i).triggerHandler("destroyed");t(n)}}(jQuery),T.Utils.cleanElement=function(e){var t=$.cleanData;$.cleanData=void 0,ko.cleanNode(e),$.cleanData=t},T.Utils.arguments=function(e){var t={};return $.each(e,function(e,n){t[n.constructor]=n}),{byConstructor:function(e){return t(e)},object:t[Object],string:t[String],func:t[Function],array:t[Array],number:t[Number]}},T.Utils.removeItem=function(e,t){var n=$.inArray(t,e);n>-1&&e.splice(n,1)},T.Utils.inheritOptions=function(e,t,n){for(var i=0,r=n.length;r>i;i++)t[n[i]]=e[n[i]];return t},T.Utils.cloneData=function(e,t){if(e){var n={};for(var i in e){var r=e[i];!e.hasOwnProperty(i)||t&&-1!==Array.prototype.indexOf.call(arguments,i)||r&&r.constructor===Function&&!ko.isObservable(r)||(n[i]=ko.utils.unwrapObservable(r))}return n}},T.Utils.normaliseBindings=function(e,t){var n=t();return n.value=e(),!ko.isObservable(n.value)&&$.isFunction(n.value)&&(n.value=n.value()),n},function(){var e=T.Utils;e.getPaneOptions=function(e,t){var n=e.constructor===String?{path:e}:e;return $.extend({},t,n)},e.bindPane=function(t,n,i,r){r=r||e.contextFor(n)||T.context();var a=new T.Types.Pane($.extend({element:$(n)[0]},i));t.setPane(a),r.renderOperation.add(a);var o=new T.Types.Pipeline(T.Events,r);return o.execute(r.options.events,a),a},e.insertPaneAfter=function(t,n,i,r){var a=$("<div/>").insertAfter(n);return e.bindPane(t,a,i,r)}}(),function(){function e(t){function n(e){return e=i(e),e=r(e),e=a(e)}function i(e){var t=e.indexOf("://")>-1?e.indexOf("://")+3:0,n=e.substring(0,t),i=e.substring(t);return n+i.replace(/\/{2,}/g,"/")}function r(e){for(var t=/[^\/\.]+\/\.\.\//;e.match(t);)e=e.replace(t,"");return e}function a(e){var t=/\.\//g,n=e.lastIndexOf("../");return n=-1==n?0:n+3,e.substring(0,n)+e.substring(n).replace(t,"")}t=t?n(t.toString()):"";var o=t.lastIndexOf("/")+1,s=t.lastIndexOf(".");return{withoutFilename:function(){return e(t.substring(0,o))},filename:function(){return e(t.substring(o))},extension:function(){return-1===s?"":t.substring(s+1)},withoutExtension:function(){return e(-1===s?t:t.substring(0,s))},combine:function(n){return e((t?t+"/":"")+n.toString())},isAbsolute:function(){return"/"===t.charAt(0)||t.indexOf("://")>-1},makeAbsolute:function(){return e("/"+t)},makeRelative:function(){return e("/"===t.charAt(0)?t.substring(1):t)},asMarkupIdentifier:function(){return this.withoutExtension().toString().replace(/\//g,"-").replace(/\./g,"")},setExtension:function(t){return e(this.withoutExtension()+"."+t)},toString:function(){return t.toString()}}}T.Path=e}(),function(){function e(e){return decodeURIComponent(e.replace(/\+/g," "))}function t(t){return function n(i,r){var a,o,s,u,l;return 2===arguments.length?(i=i.split(t),n(e(i.shift()),e(i.join(t)),!0)):(i=i.replace(/^\s+|\s+$/g,""),r.constructor===String&&(r=r.replace(/^\s+|\s+$/g,""),isNaN(r)||(o=+r,r===o.toString(10)&&(r=o))),(a=/(.*)\[([^\]]*)\]$/.exec(i))?(u=a[2],s=a[1],u?(l={},l[u]=r,n(s,l,!0)):n(s,[r],!0)):(l={},i&&(l[i]=r),l))}}function n(e,t){return e?$.isArray(e)?e.concat(t):$.isPlainObject(e)&&$.isPlainObject(t)?i(e,t):[e].concat(t):t}function i(e,t){for(var i in t)i&&t.hasOwnProperty(i)&&(e[i]=n(e[i],t[i]));return e}T.Utils.Querystring=T.Utils.Querystring||{},T.Utils.Querystring.parse=function(e,i,r){function a(){e.length>0&&"?"===e.charAt(0)&&(e=e.substring(1))}return a(),T.Utils.reduce(T.Utils.map(e.split(i||"&"),t(r||"=")),{},n)}}(),function(){function e(n,i,r,a){i=i||{},a=a||[];var o,s,u,l,c,d,p=i.seperator||"&",f=i.eqSymbol||"=",b=i.arrayKey!==!1;if(null===n||void 0===n||n.constructor===Function)return r?t(r)+f:"";if((n.constructor===Boolean||"[object Boolean]"===Object.prototype.toString.call(n))&&(n=+n),!isNaN(n)||n.constructor===String)return t(r)+f+t(n);if($.isArray(n)){for(d=[],r=b?r+"[]":r,u=0,l=n.length;l>u;u++)d.push(e(n[u],i,r,a));return d.join(p)}for(u=a.length-1;u>=0;--u)if(a[u]===n)throw new Error("T.Utils.Querystring.stringify: cyclical reference");a.push(n),d=[],o=r?r+"[":"",s=r?"]":"";for(u in n)n.hasOwnProperty(u)&&(c=o+u+s,d.push(e(n[u],i,c,a)));return a.pop(),d=d.join(p),!d&&r?r+"=":d}T.Utils.Querystring=T.Utils.Querystring||{};var t=encodeURIComponent;T.Utils.Querystring.stringify=function(t,n){return e(t,n)}}(),function(){function e(e,t){return t.constructor===Function&&(t=new t(e)),t}T.Types.Flow=function(t,n){function i(){if(t.constructor===T.Types.Node)return t.findNavigation().node;if(t.constructor===T.Types.Pane)return t.node.findNavigation().node;throw new Error("navigationSource must be either T.Types.Pane or T.Types.Node")}var r=this;this.node=i(),this.pubsub=this.node.pane.pubsub.owner,this.sagas=[],n=e(r,n),this.saga=new Tribe.PubSub.Saga(this.pubsub,n),this.start=function(e){return r.saga.start(e),r},this.end=function(e){return r.saga.end(e),T.Utils.each(r.sagas,function(t){t.end(e)}),r}},T.Types.Flow.prototype.startChild=function(t,n){return t=e(this,t),this.saga.startChild(t,n),this},T.Types.Flow.prototype.navigate=function(e,t){this.node.navigate(e,t)},T.Types.Flow.prototype.startSaga=function(e,t){var n=this.pubsub.startSaga(e,t);return this.sagas.push(n),n},T.Types.Flow.prototype.to=function(e,t){var n=this.node;return function(){n.navigate(e,t)}},T.Types.Flow.prototype.endsAt=function(e,t){var n=this;return function(){n.node.navigate(e,t),n.end()}},T.Types.Flow.prototype.start=function(e,t){var n=this;return function(){n.startChild(e,t)}},T.Types.Flow.startFlow=function(e,t){return new T.Types.Flow(this,e).start(t)}}(),T.Types.History=function(e){function t(e){null!==e.state&&r(e)}var n=0;e.replaceState(n,window.title);var i={raiseEvent:function(e){T.Utils.raiseDocumentEvent("browser.go",{count:e.state-n}),n=e.state},updateStack:function(e){n=e.state,r=i.raiseEvent}},r=i.raiseEvent;window.addEventListener&&window.addEventListener("popstate",t),this.navigate=function(t){t=t||{},e.pushState(++n,t.title,t.url)},this.go=function(t){e.go(t)},this.update=function(t){r=i.updateStack,e.go(t)},this.dispose=function(){window.removeEventListener("popstate",t)}},T.history=window.history.pushState?new T.Types.History(window.history):new T.Types.History({replaceState:function(){},pushState:function(){},go:function(){}}),T.Types.Loader=function(){var e={};this.get=function(t,n,i){if(void 0!==e[t])return e[t];var r=T.Path(t).extension().toString(),a=T.LoadHandlers[r];if(a){var o=a(t,n,i);return e[t]=o,$.when(o).always(function(){e[t]=null}),o}return T.logger.warn("Resource of type "+r+" but no handler registered."),null}},T.Types.Navigation=function(e,t){function n(e){i(e.eventData.count)}function i(e){var t=c+e;0>t&&(t=0),t>=l.length&&(t=l.length-1),t!=c&&r(l[t],0>e),c=t}function r(n,i){T.Utils.raiseDocumentEvent("navigating",{node:e,options:n,browserData:t.browserData}),e.transitionTo(n,t.transition,i)}function a(){l.splice(c+1,l.length)}function o(){t=t||{},t.constructor===String&&(t={transition:t}),t.browser===!0&&(t.browser=T.options.defaultUrlProvider)}function s(){var n=window.location.href.match(/\#.*/);n&&(n=n[0].substring(1));var i=t.browser&&t.browser.paneOptionsFrom(n);i&&(e.pane.path=i.path,e.pane.data=i.data)}function u(){return{path:e.pane.path,data:e.pane.data}}o(),s();var l=[u()],c=0;this.node=e,this.stack=l,this.navigate=function(e){t.browser&&T.history.navigate(t.browser&&t.browser.urlDataFrom(e)),a(),l.push(e),c++,r(e)},this.isAtStart=function(){return 0===c},this.go=function(e){i(e),t.browser&&T.history.update(e)},t.browser&&T.Utils.handleDocumentEvent("browser.go",n),this.dispose=function(){T.Utils.detachDocumentEvent("browser.go",n)}},T.Types.Node=function(e,t){this.parent=e,this.children=[],this.root=e?e.root:this,this.id=T.Utils.getUniqueId(),e&&e.children.push(this),t&&this.setPane(t)},T.Types.Node.prototype.navigate=function(e,t){var n=T.Utils.getPaneOptions(e,{data:t});T.Path(n.path).isAbsolute()||(n.path=T.Path(this.nodeForPath().pane.path).withoutFilename().combine(n.path).toString()),this.findNavigation().navigate(n)},T.Types.Node.prototype.navigateBack=function(){this.findNavigation().go(-1)},T.Types.Node.prototype.findNavigation=function(){return this.defaultNavigation?this.defaultNavigation:this.navigation?this.navigation:this.parent?this.parent.findNavigation():(this.navigation=new T.Types.Navigation(this),this.navigation)},T.Types.Node.prototype.transitionTo=function(e,t,n){T.transition(this,t,n).to(e)},T.Types.Node.prototype.setPane=function(e){this.pane&&(this.pane.node=null),e.node=this,this.pane=e,this.skipPath=e.skipPath,e.handlesNavigation&&(this.navigation=new T.Types.Navigation(this,e.handlesNavigation),this.root.defaultNavigation=this.root.defaultNavigation||this.navigation),e.inheritPathFrom(this.parent)},T.Types.Node.prototype.nodeForPath=function(){return this.skipPath&&this.parent?this.parent.nodeForPath():this},T.Types.Node.prototype.dispose=function(){this.root.defaultNavigation===this.navigation&&(this.root.defaultNavigation=null),this.parent&&T.Utils.removeItem(this.parent.children,this),this.pane&&this.pane.dispose&&(delete this.pane.node,this.pane.dispose())},T.Types.Node.prototype.startFlow=T.Types.Flow.startFlow,T.Types.Operation=function(){var e=this,t=[];this.promise=$.Deferred(),this.add=function(e){t.push(e)},this.complete=function(n){T.Utils.removeItem(t,n),0===t.length&&e.promise.resolve()}},T.Types.Pane=function(e){T.Utils.inheritOptions(e,this,["path","data","element","transition","reverseTransitionIn","handlesNavigation","pubsub","id","skipPath"]),this.is={rendered:$.Deferred(),disposed:$.Deferred()}},T.Types.Pane.prototype.navigate=function(e,t){this.node&&this.node.navigate(e,t)},T.Types.Pane.prototype.navigateBack=function(){this.node&&this.node.navigateBack()},T.Types.Pane.prototype.remove=function(){$(this.element).remove()},T.Types.Pane.prototype.dispose=function(){this.model&&this.model.dispose&&this.model.dispose(),this.node&&(delete this.node.pane,this.node.dispose()),this.element&&T.Utils.cleanElement(this.element)},T.Types.Pane.prototype.inheritPathFrom=function(e){e=e&&e.nodeForPath();var t=e&&e.pane,n=T.Path(this.path);this.path=n.isAbsolute()||!t?n.makeAbsolute().toString():T.Path(t.path).withoutFilename().combine(n).toString()},T.Types.Pane.prototype.find=function(e){return $(this.element).find(e)},T.Types.Pane.prototype.startRender=function(){$(this.element).addClass("__rendering")},T.Types.Pane.prototype.endRender=function(){$(this.element).removeClass("__rendering")},T.Types.Pane.prototype.toString=function(){return"{ path: '"+this.path+"' }"},T.Types.Pane.prototype.startSaga=function(e){var t=T.context().sagas[e];this.pubsub.startSaga.apply(this.pubsub,[t.constructor].concat(Array.prototype.slice.call(arguments,1)))},T.Types.Pane.prototype.startFlow=T.Types.Flow.startFlow,T.Types.Pipeline=function(e,t){this.execute=function(n,i){function r(){function s(){o.reject();var e=i?i.toString():"empty target";T.logger.error("An error occurred in the '"+u+"' event for "+e)}if(a++,a>=n.length)return o.resolve(),void 0;var u=n[a],l=e[u];return l?($.when(l(i,t)).done(r).fail(s),void 0):(T.logger.warn("No event defined for "+u),r(),void 0)}var a=-1,o=$.Deferred();return r(),o}},T.Types.Resources=function(){},T.Types.Resources.prototype.register=function(e,t,n){this[e]={constructor:t,options:n||{}},T.logger.debug("Model loaded for "+e)},T.Types.Templates=function(){function e(e,t){var n=document.createElement("script");n.className="__tribe",n.setAttribute("type","text/template"),n.id=t,n.text=e,document.getElementsByTagName("head")[0].appendChild(n)}this.store=function(t,n){var i=T.Path(n).asMarkupIdentifier().toString();e(t,"template-"+i)},this.loaded=function(e){return $("head script#template-"+T.Path(e).asMarkupIdentifier()).length>0},this.render=function(e,t){var n=T.Path(t).asMarkupIdentifier();$(e).empty().append($("head script#template-"+n).html())}},T.Events.active=function(e){return T.Utils.elementDestroyed(e.element)},T.Events.createModel=function(e,t){var n=t.models[e.path],i=n&&n.constructor?new n.constructor(e):{pane:e,data:e.data};T.Utils.embedState(i,t,e.node),e.model=i},T.Events.createPubSub=function(e,t){t.pubsub&&(e.pubsub=t.pubsub.createLifetime?t.pubsub.createLifetime():t.pubsub)},T.Events.dispose=function(e){e.pubsub&&e.pubsub.end&&e.pubsub.end(),e.dispose(),e.is.disposed.resolve()},T.Events.initialiseModel=function(e){return e.model.initialise?e.model.initialise():null},T.Events.loadResources=function(e,t){var n=T.LoadStrategies[t.options.loadStrategy];if(!n)throw"Unknown resource load strategy";return n(e,t)},T.Events.renderComplete=function(e,t){function n(){e.model.renderComplete&&e.model.renderComplete(),e.is.rendered.resolve(),T.Utils.raiseDocumentEvent("renderComplete",e),t.renderOperation=new T.Types.Operation}$.when(T.transition(e,e.transition,e.reverseTransitionIn)["in"]()).done(n),e.endRender()},T.Events.renderPane=function(e,t){function n(){ko.applyBindingsToDescendants(e.model,e.element)}var i=t.renderOperation;return e.startRender(),t.templates.render(e.element,e.path),T.Utils.tryCatch(n,null,t.options.handleExceptions,"An error occurred applying the bindings for "+e.toString()),e.model.paneRendered&&e.model.paneRendered(),i.complete(e),i.promise},T.LoadHandlers.js=function(e,t,n){function i(i){T.scriptEnvironment={url:e,resourcePath:t,context:n},T.Utils.tryCatch($.globalEval,[r(i)],n.options.handleExceptions,"An error occurred executing script loaded from "+e+(t?" for resource "+t:"")),delete T.scriptEnvironment,T.logger.debug("Loaded script from "+e)}function r(t){return t+"\n//@ sourceURL=tribe://Application/"+e.replace(/ /g,"_")}return $.ajax({url:e,dataType:"text",async:!n.options.synchronous,cache:!1,success:i})},T.LoadHandlers.css=function(e,t,n){function i(e){var n=document.getElementById("__tribeStyles");if(n||(n=document.createElement("style"),n.className="__tribe",n.id="__tribeStyles",document.getElementsByTagName("head")[0].appendChild(n)),r)try{n.appendChild(document.createTextNode(e))}catch(i){r=!1}if(!r){if(!n.styleSheet)throw new Error("Unable to append stylesheet for "+t+" to document.");n.styleSheet.cssText+=e}}var r=!0;return $.ajax({url:e,dataType:"text",async:!n.options.synchronous,cache:!1,success:i})},T.LoadHandlers.htm=function(e,t,n){function i(e){n.templates.store(e,t)}return $.ajax({url:e,dataType:"html",async:!n.options.synchronous,cache:!1,success:i})},T.LoadHandlers.html=T.LoadHandlers.htm,T.LoadStrategies.adhoc=function(e,t){if(void 0!==t.loadedPanes[e.path])return t.loadedPanes[e.path];var n=T.Path(t.options.basePath).combine(T.Path(e.path).makeRelative());if(t.templates.loaded(e.path)||t.models[e.path])return null;var i=$.complete([t.loader.get(n.setExtension("js").toString(),e.path,t),t.loader.get(n.setExtension("htm").toString(),e.path,t),t.loader.get(n.setExtension("css").toString(),e.path,t)]);return t.loadedPanes[e.path]=i,$.when(i).fail(function(){T.logger.error("Unable to load resources for '"+e.path+"'.")}).always(function(){t.loadedPanes[e.path]=null}),i},T.LoadStrategies.preloaded=function(e,t){return t.models[e.path]||t.templates.loaded(e.path)?null:(T.logger.error("No resources loaded for '"+e.path+"'."),$.Deferred().reject())},T.transition=function(e,t,n){function i(){var e=$(s);"fixed"===T.transition.mode?e.css({position:"fixed",width:e.width(),left:e.offset().left,top:e.offset().top}):e.css({position:"absolute",width:e.width(),left:e.position().left,top:e.position().top})}function r(){if(!e)throw"No target passed to T.transition";e.constructor===T.Types.Node?(a=e,o=a.pane,s=o.element):e.constructor===T.Types.Pane?(o=e,a=o.node,s=o.element):s=e}var a,o,s;r(),t=t||o&&o.transition||a&&a.transition;var u=T.Transitions[t];return n&&u&&u.reverse&&(u=T.Transitions[u.reverse]),{"in":function(){return $(s).show(),u&&u["in"](s)},out:function(e){function t(){e===!1?$(s).hide().attr("style",""):$(s).remove()}i();var n=u&&u.out(s);return $.when(n).done(t),n},to:function(e,i){var r=T.context();return a?T.Utils.insertPaneAfter(a,s,T.Utils.getPaneOptions(e,{transition:t,reverseTransitionIn:n}),r):T.insertNodeAfter(s,T.Utils.getPaneOptions(e,{transition:t,reverseTransitionIn:n}),null,r),this.out(i),r.renderOperation.promise}}},function(){function e(e,t){function r(e){setTimeout(function(){$(e).addClass("trigger")},30)}function a(t,n,r){return function(){$(t).unbind(i).removeClass(e+" in out prepare trigger"),r&&$(t).hide(),n.resolve()}}T.Transitions[e]={"in":function(t){if(!n)return null;var o=$.Deferred();return $(t).bind(i,a(t,o)).addClass("prepare in "+e),r(t),o},out:function(t){if(!n)return null;var o=$.Deferred();return $(t).addClass("prepare out "+e).on(i,a(t,o,!0)),r(t),o},reverse:t||e}}function t(){var e=document.body||document.documentElement,t=e.style,n="transition",i=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof t[n])return!0;n=n.charAt(0).toUpperCase()+n.substr(1);for(var r=0,a=i.length;a>r;r++)if("string"==typeof t[i[r]+n])return!0;return!1}var n=t();e("fade"),e("slideLeft","slideRight"),e("slideRight","slideLeft"),e("slideUp","slideDown"),e("slideDown","slideUp");var i="webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd"}(),window.__appendStyle=function(e){var t=document.getElementById("__tribeStyles");t||(t=document.createElement("style"),t.className="__tribe",t.id="__tribeStyles",document.getElementsByTagName("head")[0].appendChild(t)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(document.createTextNode(e))},window.__appendStyle(".trigger{-webkit-transition:all 250ms ease-in-out;transition:all 250ms ease-in-out}.fade.in.prepare{opacity:0}.fade.in.trigger{opacity:1}.fade.out.prepare{opacity:1}.fade.out.trigger{opacity:0}.slideRight.in.prepare{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.slideRight.in.trigger{-webkit-transform:translateX(0);transform:translateX(0)}.slideRight.out.trigger{-webkit-transform:translateX(100%);transform:translateX(100%)}.slideLeft.in.prepare{-webkit-transform:translateX(100%);transform:translateX(100%)}.slideLeft.in.trigger{-webkit-transform:translateX(0);transform:translateX(0)}.slideLeft.out.trigger{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.slideDown.in.prepare{-webkit-transform:translateY(-100%);transform:translateY(-100%)}.slideDown.in.trigger{-webkit-transform:translateY(0);transform:translateY(0)}.slideDown.out.trigger{-webkit-transform:translateY(100%);transform:translateY(100%)}.slideUp.in.prepare{-webkit-transform:translateY(100%);transform:translateY(100%)}.slideUp.in.trigger{-webkit-transform:translateY(0);transform:translateY(0)}.slideUp.out.trigger{-webkit-transform:translateY(-100%);transform:translateY(-100%)}"),function(){function e(e,t){var n=T.scriptEnvironment||{},i=n.context||T.context(),r=t.string||n.resourcePath,a=t.func,o=t.object;i[e].register(r,a,o)}T.registerModel=function(){e("models",T.Utils.arguments(arguments))},T.registerSaga=function(){e("sagas",T.Utils.arguments(arguments))},T.run=function(e){T.options=$.extend(T.options,e),T.options.pubsub=T.options.pubsub||new Tribe.PubSub({sync:T.options.synchronous,handleExceptions:T.options.handleExceptions}),ko.applyBindings()}}(),function(){var e;T.context=function(t){e=e||{models:new T.Types.Resources,sagas:new T.Types.Resources,loader:new T.Types.Loader,options:T.options,templates:new T.Types.Templates,loadedPanes:{}};var n={renderOperation:new T.Types.Operation,pubsub:T.options.pubsub};return $.extend({},e,n,t)}}(),T.options.defaultUrlProvider={urlDataFrom:function(e){return e&&{url:"#"+$.param(e)}},paneOptionsFrom:function(e){return e&&T.Utils.deparam(e.substr(1))}},function(){var e=T.Utils;T.createNode=function(t,n,i,r){i=i||T.nodeFor(t),r=r||e.contextFor(t)||T.context();var a=new T.Types.Node(i);return e.bindPane(a,t,n,r),a},T.appendNode=function(e,t,n,i){var r=$("<div/>").appendTo(e);return T.createNode(r,t,n,i)},T.insertNodeAfter=function(e,t,n,i){var r=$("<div/>").insertAfter(e);return T.createNode(r,t,n||T.nodeFor(e),i)},T.nodeFor=function(e){return e&&T.Utils.extractNode(ko.contextFor($(e)[0]))}}(),function(){function e(e){return function(){return e}}function t(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push($.extend({$key:n},e[n]));return t}ko.bindingHandlers.foreachProperty={init:function(n,i,r,a,o){return ko.bindingHandlers.foreach.init(n,e(t(i())),r,a,o)},update:function(n,i,r,a,o){return ko.bindingHandlers.foreach.update(n,e(t(i())),r,a,o)}}}(),ko.bindingHandlers.navigate={init:function(e,t,n,i){function r(){return function(){a.navigate(o.value,T.Utils.cloneData(o.data))}}var a=T.nodeFor(e);if(a){var o=T.Utils.normaliseBindings(t,n),s=ko.bindingHandlers.validatedClick||ko.bindingHandlers.click;s.init(e,r,n,i)
}}},ko.bindingHandlers.navigateBack={init:function(e,t,n,i){function r(){return function(){a.navigateBack()}}var a=T.nodeFor(e);a&&ko.bindingHandlers.click.init(e,r,n,i)}},function(){function e(e,t,n,i,r){function a(){return T.Utils.getPaneOptions(ko.utils.unwrapObservable(t()),n())}return T.createNode(e,a(),T.Utils.extractNode(r),T.Utils.extractContext(r)),{controlsDescendantBindings:!0}}ko.bindingHandlers.pane={init:e}}(),ko.bindingHandlers.publish={init:function(e,t,n,i){function r(){return function(){a.publish(o.value,T.Utils.cloneData(o.data))}}var a=T.nodeFor(e).pane.pubsub;if(a){var o=T.Utils.normaliseBindings(t,n),s=ko.bindingHandlers.validatedClick||ko.bindingHandlers.click;s.init(e,r,n,i)}}};