!function(){var t=4,e={debug:4,info:3,warn:2,error:1,none:0},n={setLevel:function(n){t=e[n],void 0===t&&(t=4)},debug:function(e){t>=4&&console.log("DEBUG: "+e)},info:function(e){t>=3&&console.info("INFO: "+e)},warn:function(e){t>=2&&console.warn("WARN: "+e)},error:function(e,n){t>=1&&console.error("ERROR: "+e,n)}};n.log=n.debug,"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=n:("undefined"==typeof T&&(T={}),T.logger=n)}(),function(){var t;"undefined"!=typeof window&&(t=window.ko),"undefined"!=typeof require&&(t=require("knockout"));var e={serialize:function(t){return JSON.stringify(this.extractMetadata(t))},extractMetadata:function(e){function n(){i.observables=[];for(var e in r)r.hasOwnProperty(e)&&t.isObservable(r[e])&&(r[e]=r[e](),i.observables.push(e))}var r=e,i={};return n(),{target:r,metadata:i}},deserialize:function(t){return t=JSON.parse(t),t.target?this.applyMetadata(t.target,t.metadata):t},applyMetadata:function(e,n){function r(){for(var t=n.observables,e=0,r=t.length;r>e;e++)i(t[e])}function i(t){e[t]=o(e[t])}function o(e){return e.constructor===Array?t.observableArray(e):t.observable(e)}return n&&r(),e}};"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=e:("undefined"==typeof T&&(T={}),T.serializer=e)}(),"undefined"==typeof Tribe&&(Tribe={}),Tribe.PubSub=function(t){function e(t){function e(e){var n=r("exceptionHandler");if(r("handleExceptions"))try{e(t.data,t)}catch(i){n&&n(i,t)}else e(t.data,t)}for(var n=a.get(t.topic),o=t.sync===!0||i.sync===!0,s=0,u=n.length;u>s;s++)o?e(n[s].handler):!function(t){setTimeout(function(){e(t.handler)})}(n[s])}function n(t,e){return t&&t.topic?t:{topic:t,data:e}}function r(e){return t&&t.hasOwnProperty(e)?t[e]:Tribe.PubSub.options[e]}var i=this,o=Tribe.PubSub.utils;this.owner=this,this.sync=r("sync");var a=new Tribe.PubSub.SubscriberList;this.subscribers=a,this.publish=function(t,r){return e(n(t,r))},this.publishSync=function(t,r){var i=n(t,r);return i.sync=!0,e(i)},this.subscribe=function(t,e){return"string"==typeof t?a.add(t,e):o.isArray(t)?o.map(t,function(t){return a.add(t,e)}):o.map(t,function(t,e){return a.add(e,t)})},this.unsubscribe=function(t){if(Tribe.PubSub.utils.isArray(t)){for(var e=[],n=0,r=t.length;r>n;n++)e.push(a.remove(t[n]));return e}return a.remove(t)},this.createLifetime=function(){return new Tribe.PubSub.Lifetime(i,i)},this.channel=function(t){return new Tribe.PubSub.Channel(i,t)}},Tribe.PubSub.Channel=function(t,e){function n(t,n){var r=t&&t.topic?t:{topic:t,data:n};return r.channelId=e,r}function r(t){return function(n,r){r.channelId===e&&t(n,r)}}var i=this;t=t.createLifetime(),this.id=e,this.owner=t.owner,this.publish=function(e,r){return t.publish(n(e,r))},this.publishSync=function(e,r){return t.publishSync(n(e,r))},this.subscribe=function(e,n){return t.subscribe(e,r(n))},this.subscribeOnce=function(e,n){return t.subscribeOnce(e,r(n))},this.unsubscribe=function(e){return t.unsubscribe(e)},this.end=function(){return t.end()},this.createLifetime=function(){return new Tribe.PubSub.Lifetime(i,i.owner)}},Tribe.PubSub.Lifetime=function(t,e){function n(t){return Tribe.PubSub.utils.isArray(t)?i=i.concat(t):i.push(t),t}var r=this,i=[];this.owner=e,this.publish=function(e,n){return t.publish(e,n)},this.publishSync=function(e,n){return t.publishSync(e,n)},this.subscribe=function(e,r){var i=t.subscribe(e,r);return n(i)},this.subscribeOnce=function(e,r){var i=t.subscribeOnce(e,r);return n(i)},this.unsubscribe=function(e){return t.unsubscribe(e)},this.channel=function(t){return new Tribe.PubSub.Channel(r,t)},this.end=function(){return t.unsubscribe(i)},this.createLifetime=function(){return new Tribe.PubSub.Lifetime(r,r.owner)}},Tribe.PubSub.options={sync:!1,handleExceptions:!0,exceptionHandler:function(t,e){window.console&&console.log("Exception occurred in subscriber to '"+e.topic+"': "+t.message)}},Tribe.PubSub.Saga=function(t,e){function n(){e&&(e.constructor===Function?e(r):Tribe.PubSub.utils.copyProperties(e,r,["handles","endsChildrenExplicitly"]))}var r=this,i=Tribe.PubSub.utils;t=t.createLifetime(),this.pubsub=t,this.children=[],n();var o=this.handles||{};this.topics=Object.keys(o),this.start=function(t){return i.each(o,r.addHandler,r),o.onstart&&o.onstart(t,r),r},this.startChild=function(e,n){return r.children.push(new Tribe.PubSub.Saga(t,e).start(n)),r},this.join=function(t,e){return i.each(o,r.addHandler,r),r.data=t,o.onjoin&&o.onjoin(e,r),r},this.end=function(e){return o.onend&&o.onend(e,r),t.end(),r.endChildren(e),r},this.endChildren=function(t){Tribe.PubSub.utils.each(r.children,function(e){e.end(t)})}},Tribe.PubSub.Saga.startSaga=function(t,e){return new Tribe.PubSub.Saga(this,t).start(e)},Tribe.PubSub.prototype.startSaga=Tribe.PubSub.Saga.startSaga,Tribe.PubSub.Lifetime.prototype.startSaga=Tribe.PubSub.Saga.startSaga,Tribe.PubSub.Saga.prototype.addHandler=function(t,e){function n(t){return function(e,n){o.endsChildrenExplicitly||o.endChildren(e),t(e,n,o)}}function r(t){return function(e){o.startChild({handles:t},e)}}function i(){return function(t){o.end(t)}}var o=this;"onstart"!==e&&"onend"!==e&&"onjoin"!==e&&(t?t.constructor===Function?this.pubsub.subscribe(e,n(t)):this.pubsub.subscribe(e,r(t)):this.pubsub.subscribe(e,i()))},Tribe.PubSub.prototype.subscribeOnce=function(t,e){function n(){var n={};return a.each(t,function(t){n[t]=i(e)}),n}function r(){return a.map(t,function(t,e){return s.subscribe(e,i(t))})}function i(t){return function(){s.end(),t.apply(o,arguments)}}var o=this,a=Tribe.PubSub.utils,s=this.createLifetime();return"string"==typeof t?s.subscribe(t,i(e)):a.isArray(t)?s.subscribe(n()):s.subscribe(r())},Tribe.PubSub.SubscriberList=function(){function t(t,e){if("*"===e)return!0;var n="^"+e.replace(/\./g,"\\.").replace(/\*/g,"[^.]*")+"$";return t.match(n)}var e={},n=-1;this.get=function(n){var r=[];for(var i in e)e.hasOwnProperty(i)&&t(n,i)&&(r=r.concat(e[i]));return r},this.add=function(t,r){var i=(++n).toString();return e.hasOwnProperty(t)||(e[t]=[]),e[t].push({topic:t,handler:r,token:i}),i},this.remove=function(t){for(var n in e)if(e.hasOwnProperty(n))for(var r=0,i=e[n].length;i>r;r++)if(e[n][r].token===t)return e[n].splice(r,1),t;return!1}},Tribe.PubSub.utils={},function(t){t.isArray=function(t){return t.constructor===Array};var e=Array.prototype.forEach,n=Array.prototype.map,r={};t.each=function(t,n,i){if(null!=t)if(e&&t.forEach===e)t.forEach(n,i);else if(t.length===+t.length){for(var o=0,a=t.length;a>o;o++)if(n.call(i,t[o],o,t)===r)return}else for(var s in t)if(t.hasOwnProperty(s)&&n.call(i,t[s],s,t)===r)return},t.map=function(e,r,i){var o=[];return null==e?o:n&&e.map===n?e.map(r,i):(t.each(e,function(t,e,n){o[o.length]=r.call(i,t,e,n)}),o)},t.copyProperties=function(t,e,n){for(var r=0,i=n.length;i>r;r++){var o=n[r];t.hasOwnProperty(o)&&(e[o]=t[o])}}}(Tribe.PubSub.utils),"undefined"!=typeof module&&(module.exports=new Tribe.PubSub),function(t){if("undefined"==typeof jQuery)throw"jQuery must be loaded before knockout.composite can initialise";if("undefined"==typeof ko)throw"knockout.js must be loaded before knockout.composite can initialise";if("undefined"==typeof T)throw"Tribe.Common must be loaded before knockout.composite can initialise";t.Tribe=t.Tribe||{},t.Tribe.Composite={},t.TC=t.Tribe.Composite,t.TC.Events={},t.TC.Factories={},t.TC.LoadHandlers={},t.TC.LoadStrategies={},t.TC.Transitions={},t.TC.Types={},t.TC.Utils={},t.TC.logger=T.logger,t.TC.pubsub=new Tribe.PubSub,$(function(){$("head").append('<style class="__tribe">.__rendering { position: fixed; top: -10000px; left: -10000px; }</style>')})}(window||this),TC.defaultOptions=function(){return{synchronous:!1,handleExceptions:!0,basePath:"",loadStrategy:"adhoc",events:["loadResources","createPubSub","createModel","initialiseModel","renderPane","renderComplete","active","dispose"]}},TC.options=TC.defaultOptions(),function(){function t(t){return{init:function(e,n){function o(e){e.which===t&&i(r.val())}var r=$(e),i=n();$.isFunction(i)&&r.keyup(o)}}}ko.bindingHandlers.cssClass={update:function(t,e){var n=e();n&&$(t).addClass(ko.utils.unwrapObservable(n))}},ko.bindingHandlers.enterPressed=t(13),ko.bindingHandlers.escapePressed=t(27)}(),function(t){t.each=function(t,e){return $.each(t||[],function(t,n){return e(n,t)})},t.map=function(e,n){var r=[];return t.each(e||[],function(t,e){r.push(n(t,e))}),r},t.filter=function(t,e){var n=[];return $.each(t||[],function(t,r){e(r,t)&&n.push(r)}),n},t.pluck=function(e,n){return t.map(e,function(t){return t&&t[n]})},t.reduce=function(e,n,r){return t.each(e,function(t,i){n=r(n,t,i,e)}),n}}(TC.Utils),TC.Utils.deparam=function(t,e){var n=decodeURIComponent,r={},i={"true":!0,"false":!1,"null":null};return $.each(t.replace(/\+/g," ").split("&"),function(t,o){var u,a=o.split("="),s=n(a[0]),c=r,l=0,f=s.split("]["),d=f.length-1;if(/\[/.test(f[0])&&/\]$/.test(f[d])?(f[d]=f[d].replace(/\]$/,""),f=f.shift().split("[").concat(f),d=f.length-1):d=0,2===a.length)if(u=n(a[1]),e&&(u=u&&!isNaN(u)?+u:"undefined"===u?void 0:void 0!==i[u]?i[u]:u),d)for(;d>=l;l++)s=""===f[l]?c.length:f[l],c=c[s]=d>l?c[s]||(f[l+1]&&isNaN(f[l+1])?{}:[]):u;else $.isArray(r[s])?r[s].push(u):r[s]=void 0!==r[s]?[r[s],u]:u;else s&&(r[s]=e?void 0:"")}),r},function(){function t(t,e,n){if(!t)throw"Can't embed property in falsy value";t["__"+e]=n}function e(t,e){return t&&t["__"+e]}TC.Utils.embedState=function(e,n,r){t(e,"context",n),t(e,"node",r)},TC.Utils.contextFor=function(t){return t&&TC.Utils.extractContext(ko.contextFor($(t)[0]))},TC.Utils.extractContext=function(t){return t&&e(t.$root,"context")},TC.Utils.extractNode=function(t){return t&&e(t.$root,"node")}}(),function(){TC.Utils.elementDestroyed=function(t){function n(e){e.target===t&&r()}function r(){$(t).off("destroyed",r),$(document).off("DOMNodeRemoved",n),e.resolve()}t.constructor===jQuery&&(t=t[0]);var e=$.Deferred();return $(t).on("destroyed",r),$(document).on("DOMNodeRemoved",n),e},TC.Utils.raiseDocumentEvent=function(t,e){var n=$.Event(t);n.eventData=e,$(document).trigger(n)};var t={};TC.Utils.handleDocumentEvent=function(e,n){function r(t){n(t.originalEvent||t)}$(document).on(e,r),t[n]=r},TC.Utils.detachDocumentEvent=function(e,n){$(document).off(e,t[n]),delete t[n]}}(),TC.Utils.tryCatch=function(t,e,n,r){if(n)try{t.apply(this,e||[])}catch(i){TC.logger.error(r,i)}else t.apply(this,e||[])},function(){TC.Utils.idGenerator=function(){return{next:function(){var t=0;return function(){return 0==arguments[0]?(t=1,0):t++}}()}};var t=TC.Utils.idGenerator();TC.Utils.getUniqueId=function(){return t.next()}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null==this)throw new TypeError;var e,n,r=Object(this),i=r.length>>>0;if(0===i)return-1;if(e=0,arguments.length>1&&(e=Number(arguments[1]),e!=e?e=0:0!=e&&1/0!=e&&e!=-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),e>=i)return-1;for(n=e>=0?e:Math.max(i-Math.abs(e),0);i>n;n++)if(n in r&&r[n]===t)return n;return-1}),function(t){t.complete=function(e){function o(e,r){n.push(t.Deferred(function(e){t.when(r).done(function(){i=!0}).always(function(){e.resolve()})}))}var n=[],r=t.Deferred(),i=!1;return t.isArray(e)?t.each(e,o):o(0,e),t.when.apply(t,n).done(function(){i?r.resolve():r.reject()}),r}}(jQuery),function(t){var e=jQuery.cleanData;t.cleanData=function(n){for(var i,r=0;void 0!==(i=n[r]);r++)t(i).triggerHandler("destroyed");e(n)}}(jQuery),TC.Utils.cleanElement=function(t){var e=$.cleanData;$.cleanData=void 0,ko.cleanNode(t),$.cleanData=e},TC.Utils.arguments=function(t){var e={};return $.each(t,function(t,n){e[n.constructor]=n}),{byConstructor:function(t){return e(t)},object:e[Object],string:e[String],func:e[Function],array:e[Array],number:e[Number]}},TC.Utils.removeItem=function(t,e){var n=$.inArray(e,t);n>-1&&t.splice(n,1)},TC.Utils.inheritOptions=function(t,e,n){for(var r=0,i=n.length;i>r;r++)e[n[r]]=t[n[r]];return e},TC.Utils.cloneData=function(t,e){if(t){var n={};for(var r in t){var i=t[r];!t.hasOwnProperty(r)||e&&-1!==Array.prototype.indexOf.call(arguments,r)||i&&i.constructor===Function&&!ko.isObservable(i)||(n[r]=ko.utils.unwrapObservable(i))}return n}},TC.Utils.normaliseBindings=function(t,e){var n=e();return n.value=t(),!ko.isObservable(n.value)&&$.isFunction(n.value)&&(n.value=n.value()),n},function(){var t=TC.Utils;t.getPaneOptions=function(t,e){var n=t.constructor===String?{path:t}:t;return $.extend({},e,n)},t.bindPane=function(e,n,r,i){i=i||t.contextFor(n)||TC.context();var o=new TC.Types.Pane($.extend({element:$(n)[0]},r));e.setPane(o),i.renderOperation.add(o);var a=new TC.Types.Pipeline(TC.Events,i);return a.execute(i.options.events,o),o},t.insertPaneAfter=function(e,n,r,i){var o=$("<div/>").insertAfter(n);return t.bindPane(e,o,r,i)}}(),function(){function t(e){function i(t){return t=o(t),t=a(t),t=s(t)}function o(t){var e=t.indexOf("://")>-1?t.indexOf("://")+3:0,n=t.substring(0,e),r=t.substring(e);return n+r.replace(/\/{2,}/g,"/")}function a(t){for(var e=/[^\/\.]+\/\.\.\//;t.match(e);)t=t.replace(e,"");return t}function s(t){var e=/\.\//g,n=t.lastIndexOf("../");return n=-1==n?0:n+3,t.substring(0,n)+t.substring(n).replace(e,"")}e=e?i(e.toString()):"";var n=e.lastIndexOf("/")+1,r=e.lastIndexOf(".");return{withoutFilename:function(){return t(e.substring(0,n))},filename:function(){return t(e.substring(n))},extension:function(){return-1===r?"":e.substring(r+1)},withoutExtension:function(){return t(-1===r?e:e.substring(0,r))},combine:function(n){return t((e?e+"/":"")+n.toString())},isAbsolute:function(){return"/"===e.charAt(0)||e.indexOf("://")>-1},makeAbsolute:function(){return t("/"+e)},makeRelative:function(){return t("/"===e.charAt(0)?e.substring(1):e)},asMarkupIdentifier:function(){return this.withoutExtension().toString().replace(/\//g,"-").replace(/\./g,"")},setExtension:function(e){return t(this.withoutExtension()+"."+e)},toString:function(){return e.toString()}}}TC.Path=t}(),function(){function t(t){return decodeURIComponent(t.replace(/\+/g," "))}function e(e){return function n(r,i){var o,a,s,u,c;return 2===arguments.length?(r=r.split(e),n(t(r.shift()),t(r.join(e)),!0)):(r=r.replace(/^\s+|\s+$/g,""),i.constructor===String&&(i=i.replace(/^\s+|\s+$/g,""),isNaN(i)||(a=+i,i===a.toString(10)&&(i=a))),(o=/(.*)\[([^\]]*)\]$/.exec(r))?(u=o[2],s=o[1],u?(c={},c[u]=i,n(s,c,!0)):n(s,[i],!0)):(c={},r&&(c[r]=i),c))}}function n(t,e){return t?$.isArray(t)?t.concat(e):$.isPlainObject(t)&&$.isPlainObject(e)?r(t,e):[t].concat(e):e}function r(t,e){for(var r in e)r&&e.hasOwnProperty(r)&&(t[r]=n(t[r],e[r]));return t}TC.Utils.Querystring=TC.Utils.Querystring||{},TC.Utils.Querystring.parse=function(t,r,i){function o(){t.length>0&&"?"===t.charAt(0)&&(t=t.substring(1))}return o(),TC.Utils.reduce(TC.Utils.map(t.split(r||"&"),e(i||"=")),{},n)}}(),function(){function e(n,r,i,o){r=r||{},o=o||[];var a,s,u,c,l,f,d=r.seperator||"&",p=r.eqSymbol||"=",h=r.arrayKey!==!1;if(null===n||void 0===n||n.constructor===Function)return i?t(i)+p:"";if((n.constructor===Boolean||"[object Boolean]"===Object.prototype.toString.call(n))&&(n=+n),!isNaN(n)||n.constructor===String)return t(i)+p+t(n);if($.isArray(n)){for(f=[],i=h?i+"[]":i,u=0,c=n.length;c>u;u++)f.push(e(n[u],r,i,o));return f.join(d)}for(u=o.length-1;u>=0;--u)if(o[u]===n)throw new Error("TC.Utils.Querystring.stringify: cyclical reference");o.push(n),f=[],a=i?i+"[":"",s=i?"]":"";for(u in n)n.hasOwnProperty(u)&&(l=a+u+s,f.push(e(n[u],r,l,o)));return o.pop(),f=f.join(d),!f&&i?i+"=":f}TC.Utils.Querystring=TC.Utils.Querystring||{};var t=encodeURIComponent;TC.Utils.Querystring.stringify=function(t,n){return e(t,n)}}(),function(){function t(t,e){return e.constructor===Function&&(e=new e(t)),e}TC.Types.Flow=function(e,n){function i(){if(e.constructor===TC.Types.Node)return e.findNavigation().node;if(e.constructor===TC.Types.Pane)return e.node.findNavigation().node;throw new Error("navigationSource must be either TC.Types.Pane or TC.Types.Node")}var r=this;this.node=i(),this.pubsub=this.node.pane.pubsub.owner,this.sagas=[],n=t(r,n),this.saga=new Tribe.PubSub.Saga(this.pubsub,n),this.start=function(t){return r.saga.start(t),r},this.end=function(t){return r.saga.end(t),TC.Utils.each(r.sagas,function(e){e.end(t)}),r}},TC.Types.Flow.prototype.startChild=function(e,n){return e=t(this,e),this.saga.startChild(e,n),this},TC.Types.Flow.prototype.navigate=function(t,e){this.node.navigate(t,e)},TC.Types.Flow.prototype.startSaga=function(t,e){var n=this.pubsub.startSaga(t,e);return this.sagas.push(n),n},TC.Types.Flow.prototype.to=function(t,e){var n=this.node;return function(){n.navigate(t,e)}},TC.Types.Flow.prototype.endsAt=function(t,e){var n=this;return function(){n.node.navigate(t,e),n.end()}},TC.Types.Flow.prototype.start=function(t,e){var n=this;return function(){n.startChild(t,e)}},TC.Types.Flow.startFlow=function(t,e){return new TC.Types.Flow(this,t).start(e)}}(),TC.Types.History=function(t){function i(t){null!==t.state&&r(t)}var e=0;t.replaceState(e,window.title);var n={raiseEvent:function(t){TC.Utils.raiseDocumentEvent("browser.go",{count:t.state-e}),e=t.state},updateStack:function(t){e=t.state,r=n.raiseEvent}},r=n.raiseEvent;window.addEventListener&&window.addEventListener("popstate",i),this.navigate=function(n){n=n||{},t.pushState(++e,n.title,n.url)},this.go=function(e){t.go(e)},this.update=function(e){r=n.updateStack,t.go(e)},this.dispose=function(){window.removeEventListener("popstate",i)}},TC.history=window.history.pushState?new TC.Types.History(window.history):new TC.Types.History({replaceState:function(){},pushState:function(){},go:function(){}}),TC.Types.Loader=function(){var e={};this.get=function(t,n,r){if(void 0!==e[t])return e[t];var i=TC.Path(t).extension().toString(),o=TC.LoadHandlers[i];if(o){var a=o(t,n,r);return e[t]=a,$.when(a).always(function(){e[t]=null}),a}return TC.logger.warn("Resource of type "+i+" but no handler registered."),null}},TC.Types.Navigation=function(t,e){function i(t){o(t.eventData.count)}function o(t){var e=r+t;0>e&&(e=0),e>=n.length&&(e=n.length-1),e!=r&&a(n[e],0>t),r=e}function a(n,r){TC.Utils.raiseDocumentEvent("navigating",{node:t,options:n,browserData:e.browserData}),t.transitionTo(n,e.transition,r)}function s(){n.splice(r+1,n.length)}function u(){e=e||{},e.constructor===String&&(e={transition:e}),e.browser===!0&&(e.browser=TC.options.defaultUrlProvider)}function c(){var n=window.location.href.match(/\#.*/);n&&(n=n[0].substring(1));var r=e.browser&&e.browser.paneOptionsFrom(n);r&&(t.pane.path=r.path,t.pane.data=r.data)}function l(){return{path:t.pane.path,data:t.pane.data}}u(),c();var n=[l()],r=0;this.node=t,this.stack=n,this.navigate=function(t){e.browser&&TC.history.navigate(e.browser&&e.browser.urlDataFrom(t)),s(),n.push(t),r++,a(t)},this.isAtStart=function(){return 0===r},this.go=function(t){o(t),e.browser&&TC.history.update(t)},e.browser&&TC.Utils.handleDocumentEvent("browser.go",i),this.dispose=function(){TC.Utils.detachDocumentEvent("browser.go",i)}},TC.Types.Node=function(t,e){this.parent=t,this.children=[],this.root=t?t.root:this,this.id=TC.Utils.getUniqueId(),t&&t.children.push(this),e&&this.setPane(e)},TC.Types.Node.prototype.navigate=function(t,e){var n=TC.Utils.getPaneOptions(t,{data:e});TC.Path(n.path).isAbsolute()||(n.path=TC.Path(this.nodeForPath().pane.path).withoutFilename().combine(n.path).toString()),this.findNavigation().navigate(n)},TC.Types.Node.prototype.navigateBack=function(){this.findNavigation().go(-1)},TC.Types.Node.prototype.findNavigation=function(){return this.defaultNavigation?this.defaultNavigation:this.navigation?this.navigation:this.parent?this.parent.findNavigation():(this.navigation=new TC.Types.Navigation(this),this.navigation)},TC.Types.Node.prototype.transitionTo=function(t,e,n){TC.transition(this,e,n).to(t)},TC.Types.Node.prototype.setPane=function(t){this.pane&&(this.pane.node=null),t.node=this,this.pane=t,this.skipPath=t.skipPath,t.handlesNavigation&&(this.navigation=new TC.Types.Navigation(this,t.handlesNavigation),this.root.defaultNavigation=this.root.defaultNavigation||this.navigation),t.inheritPathFrom(this.parent)},TC.Types.Node.prototype.nodeForPath=function(){return this.skipPath&&this.parent?this.parent.nodeForPath():this},TC.Types.Node.prototype.dispose=function(){this.root.defaultNavigation===this.navigation&&(this.root.defaultNavigation=null),this.parent&&TC.Utils.removeItem(this.parent.children,this),this.pane&&this.pane.dispose&&(delete this.pane.node,this.pane.dispose())},TC.Types.Node.prototype.startFlow=TC.Types.Flow.startFlow,TC.Types.Operation=function(){var t=this,e=[];this.promise=$.Deferred(),this.add=function(t){e.push(t)},this.complete=function(n){TC.Utils.removeItem(e,n),0===e.length&&t.promise.resolve()}},TC.Types.Pane=function(t){TC.Utils.inheritOptions(t,this,["path","data","element","transition","reverseTransitionIn","handlesNavigation","pubsub","id","skipPath"]),this.is={rendered:$.Deferred(),disposed:$.Deferred()}},TC.Types.Pane.prototype.navigate=function(t,e){this.node&&this.node.navigate(t,e)},TC.Types.Pane.prototype.navigateBack=function(){this.node&&this.node.navigateBack()},TC.Types.Pane.prototype.remove=function(){$(this.element).remove()},TC.Types.Pane.prototype.dispose=function(){this.model&&this.model.dispose&&this.model.dispose(),this.node&&(delete this.node.pane,this.node.dispose()),this.element&&TC.Utils.cleanElement(this.element)},TC.Types.Pane.prototype.inheritPathFrom=function(t){t=t&&t.nodeForPath();var e=t&&t.pane,n=TC.Path(this.path);this.path=n.isAbsolute()||!e?n.makeAbsolute().toString():TC.Path(e.path).withoutFilename().combine(n).toString()},TC.Types.Pane.prototype.find=function(t){return $(this.element).find(t)},TC.Types.Pane.prototype.startRender=function(){$(this.element).addClass("__rendering")},TC.Types.Pane.prototype.endRender=function(){$(this.element).removeClass("__rendering")},TC.Types.Pane.prototype.toString=function(){return"{ path: '"+this.path+"' }"},TC.Types.Pane.prototype.startSaga=function(t){var n=TC.context().sagas[t];this.pubsub.startSaga.apply(this.pubsub,[n.constructor].concat(Array.prototype.slice.call(arguments,1)))},TC.Types.Pane.prototype.startFlow=TC.Types.Flow.startFlow,TC.Types.Pipeline=function(t,e){this.execute=function(n,r){function a(){function c(){o.reject();var t=r?r.toString():"empty target";TC.logger.error("An error occurred in the '"+s+"' event for "+t)}if(i++,i>=n.length)return o.resolve(),void 0;var s=n[i],u=t[s];return u?($.when(u(r,e)).done(a).fail(c),void 0):(TC.logger.warn("No event defined for "+s),a(),void 0)}var i=-1,o=$.Deferred();return a(),o}},TC.Types.Resources=function(){},TC.Types.Resources.prototype.register=function(t,e,n){this[t]={constructor:e,options:n||{}},TC.logger.debug("Model loaded for "+t)},TC.Types.Templates=function(){function e(t,e){var n=document.createElement("script");n.className="__tribe",n.setAttribute("type","text/template"),n.id=e,n.text=t,document.getElementsByTagName("head")[0].appendChild(n)}this.store=function(t,n){var r=TC.Path(n).asMarkupIdentifier().toString();e(t,"template-"+r)},this.loaded=function(t){return $("head script#template-"+TC.Path(t).asMarkupIdentifier()).length>0},this.render=function(t,e){var n=TC.Path(e).asMarkupIdentifier();$(t).empty().append($("head script#template-"+n).html())}},TC.Events.active=function(t){return TC.Utils.elementDestroyed(t.element)},TC.Events.createModel=function(t,e){var n=e.models[t.path],r=n&&n.constructor?new n.constructor(t):{pane:t,data:t.data};TC.Utils.embedState(r,e,t.node),t.model=r},TC.Events.createPubSub=function(t,e){e.pubsub&&(t.pubsub=e.pubsub.createLifetime?e.pubsub.createLifetime():e.pubsub)},TC.Events.dispose=function(t){t.pubsub&&t.pubsub.end&&t.pubsub.end(),t.dispose(),t.is.disposed.resolve()},TC.Events.initialiseModel=function(t){return t.model.initialise?t.model.initialise():null},TC.Events.loadResources=function(t,e){var n=TC.LoadStrategies[e.options.loadStrategy];if(!n)throw"Unknown resource load strategy";return n(t,e)},TC.Events.renderComplete=function(t,e){function n(){t.model.renderComplete&&t.model.renderComplete(),t.is.rendered.resolve(),TC.Utils.raiseDocumentEvent("renderComplete",t),e.renderOperation=new TC.Types.Operation}$.when(TC.transition(t,t.transition,t.reverseTransitionIn)["in"]()).done(n),t.endRender()},TC.Events.renderPane=function(t,e){function r(){ko.applyBindingsToDescendants(t.model,t.element)}var n=e.renderOperation;return t.startRender(),e.templates.render(t.element,t.path),TC.Utils.tryCatch(r,null,e.options.handleExceptions,"An error occurred applying the bindings for "+t.toString()),t.model.paneRendered&&t.model.paneRendered(),n.complete(t),n.promise},TC.LoadHandlers.js=function(t,e,n){function r(r){TC.scriptEnvironment={url:t,resourcePath:e,context:n},TC.Utils.tryCatch($.globalEval,[i(r)],n.options.handleExceptions,"An error occurred executing script loaded from "+t+(e?" for resource "+e:"")),delete TC.scriptEnvironment,TC.logger.debug("Loaded script from "+t)}function i(e){return e+"\n//@ sourceURL=tribe://Application/"+t.replace(/ /g,"_")}return $.ajax({url:t,dataType:"text",async:!n.options.synchronous,cache:!1,success:r})},TC.LoadHandlers.css=function(t,e,n){function i(t){var n=document.getElementById("__tribeStyles");if(n||(n=document.createElement("style"),n.className="__tribe",n.id="__tribeStyles",document.getElementsByTagName("head")[0].appendChild(n)),r)try{n.appendChild(document.createTextNode(t))}catch(i){r=!1}if(!r){if(!n.styleSheet)throw new Error("Unable to append stylesheet for "+e+" to document.");n.styleSheet.cssText+=t}}var r=!0;return $.ajax({url:t,dataType:"text",async:!n.options.synchronous,cache:!1,success:i})},TC.LoadHandlers.htm=function(t,e,n){function r(t){n.templates.store(t,e)}return $.ajax({url:t,dataType:"html",async:!n.options.synchronous,cache:!1,success:r})},TC.LoadHandlers.html=TC.LoadHandlers.htm,TC.LoadStrategies.adhoc=function(t,e){if(void 0!==e.loadedPanes[t.path])return e.loadedPanes[t.path];var n=TC.Path(e.options.basePath).combine(TC.Path(t.path).makeRelative());if(e.templates.loaded(t.path)||e.models[t.path])return null;var r=$.complete([e.loader.get(n.setExtension("js").toString(),t.path,e),e.loader.get(n.setExtension("htm").toString(),t.path,e),e.loader.get(n.setExtension("css").toString(),t.path,e)]);return e.loadedPanes[t.path]=r,$.when(r).fail(function(){TC.logger.error("Unable to load resources for '"+t.path+"'.")}).always(function(){e.loadedPanes[t.path]=null}),r},TC.LoadStrategies.preloaded=function(t,e){return e.models[t.path]||e.templates.loaded(t.path)?null:(TC.logger.error("No resources loaded for '"+t.path+"'."),$.Deferred().reject())},TC.transition=function(t,e,n){function s(){var t=$(o);"fixed"===TC.transition.mode?t.css({position:"fixed",width:t.width(),left:t.offset().left,top:t.offset().top}):t.css({position:"absolute",width:t.width(),left:t.position().left,top:t.position().top})}function u(){if(!t)throw"No target passed to TC.transition";t.constructor===TC.Types.Node?(r=t,i=r.pane,o=i.element):t.constructor===TC.Types.Pane?(i=t,r=i.node,o=i.element):o=t}var r,i,o;u(),e=e||i&&i.transition||r&&r.transition;var a=TC.Transitions[e];return n&&a&&a.reverse&&(a=TC.Transitions[a.reverse]),{"in":function(){return $(o).show(),a&&a["in"](o)},out:function(t){function n(){t===!1?$(o).hide().attr("style",""):$(o).remove()}s();var e=a&&a.out(o);return $.when(e).done(n),e},to:function(t,i){var a=TC.context();return r?TC.Utils.insertPaneAfter(r,o,TC.Utils.getPaneOptions(t,{transition:e,reverseTransitionIn:n}),a):TC.insertNodeAfter(o,TC.Utils.getPaneOptions(t,{transition:e,reverseTransitionIn:n}),null,a),this.out(i),a.renderOperation.promise}}},function(){function n(n,r){function i(t){setTimeout(function(){$(t).addClass("trigger")},30)}function o(t,r,i){return function(){$(t).unbind(e).removeClass(n+" in out prepare trigger"),i&&$(t).hide(),r.resolve()}}TC.Transitions[n]={"in":function(r){if(!t)return null;var a=$.Deferred();return $(r).bind(e,o(r,a)).addClass("prepare in "+n),i(r),a},out:function(r){if(!t)return null;var a=$.Deferred();return $(r).addClass("prepare out "+n).on(e,o(r,a,!0)),i(r),a},reverse:r||n}}function r(){var t=document.body||document.documentElement,e=t.style,n="transition",r=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof e[n])return!0;n=n.charAt(0).toUpperCase()+n.substr(1);for(var i=0,o=r.length;o>i;i++)if("string"==typeof e[r[i]+n])return!0;return!1}var t=r();n("fade"),n("slideLeft","slideRight"),n("slideRight","slideLeft"),n("slideUp","slideDown"),n("slideDown","slideUp");var e="webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd"}(),window.__appendStyle=function(t){var e=document.getElementById("__tribeStyles");e||(e=document.createElement("style"),e.className="__tribe",e.id="__tribeStyles",document.getElementsByTagName("head")[0].appendChild(e)),e.styleSheet?e.styleSheet.cssText+=t:e.appendChild(document.createTextNode(t))},window.__appendStyle(".trigger{-webkit-transition:all 250ms ease-in-out;transition:all 250ms ease-in-out}.fade.in.prepare{opacity:0}.fade.in.trigger{opacity:1}.fade.out.prepare{opacity:1}.fade.out.trigger{opacity:0}.slideRight.in.prepare{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.slideRight.in.trigger{-webkit-transform:translateX(0);transform:translateX(0)}.slideRight.out.trigger{-webkit-transform:translateX(100%);transform:translateX(100%)}.slideLeft.in.prepare{-webkit-transform:translateX(100%);transform:translateX(100%)}.slideLeft.in.trigger{-webkit-transform:translateX(0);transform:translateX(0)}.slideLeft.out.trigger{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.slideDown.in.prepare{-webkit-transform:translateY(-100%);transform:translateY(-100%)}.slideDown.in.trigger{-webkit-transform:translateY(0);transform:translateY(0)}.slideDown.out.trigger{-webkit-transform:translateY(100%);transform:translateY(100%)}.slideUp.in.prepare{-webkit-transform:translateY(100%);transform:translateY(100%)}.slideUp.in.trigger{-webkit-transform:translateY(0);transform:translateY(0)}.slideUp.out.trigger{-webkit-transform:translateY(-100%);transform:translateY(-100%)}"),function(){function t(t,e){var n=TC.scriptEnvironment||{},r=n.context||TC.context(),i=e.string||n.resourcePath,o=e.func,a=e.object;r[t].register(i,o,a)}TC.registerModel=function(){t("models",TC.Utils.arguments(arguments))},TC.registerSaga=function(){t("sagas",TC.Utils.arguments(arguments))},TC.run=function(t){TC.options=$.extend(TC.options,t),TC.options.pubsub=TC.options.pubsub||new Tribe.PubSub({sync:TC.options.synchronous,handleExceptions:TC.options.handleExceptions}),ko.applyBindings()}}(),function(){var t;TC.context=function(e){t=t||{models:new TC.Types.Resources,sagas:new TC.Types.Resources,loader:new TC.Types.Loader,options:TC.options,templates:new TC.Types.Templates,loadedPanes:{}};var n={renderOperation:new TC.Types.Operation,pubsub:TC.options.pubsub};return $.extend({},t,n,e)}}(),TC.options.defaultUrlProvider={urlDataFrom:function(t){return t&&{url:"#"+$.param(t)}},paneOptionsFrom:function(t){return t&&TC.Utils.deparam(t.substr(1))}},function(){var t=TC.Utils;TC.createNode=function(e,n,r,i){r=r||TC.nodeFor(e),i=i||t.contextFor(e)||TC.context();var o=new TC.Types.Node(r);return t.bindPane(o,e,n,i),o},TC.appendNode=function(t,e,n,r){var i=$("<div/>").appendTo(t);return TC.createNode(i,e,n,r)},TC.insertNodeAfter=function(t,e,n,r){var i=$("<div/>").insertAfter(t);return TC.createNode(i,e,n||TC.nodeFor(t),r)},TC.nodeFor=function(t){return t&&TC.Utils.extractNode(ko.contextFor($(t)[0]))}}(),function(){function t(t){return function(){return t}}function e(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push($.extend({$key:n},t[n]));return e}ko.bindingHandlers.foreachProperty={init:function(n,r,i,o,a){return ko.bindingHandlers.foreach.init(n,t(e(r())),i,o,a)},update:function(n,r,i,o,a){return ko.bindingHandlers.foreach.update(n,t(e(r())),i,o,a)}}}(),ko.bindingHandlers.navigate={init:function(t,e,n,r){function u(){return function(){o.navigate(a.value,TC.Utils.cloneData(a.data))}}var o=TC.nodeFor(t);if(o){var a=TC.Utils.normaliseBindings(e,n),s=ko.bindingHandlers.validatedClick||ko.bindingHandlers.click;
s.init(t,u,n,r)}}},ko.bindingHandlers.navigateBack={init:function(t,e,n,r){function a(){return function(){o.navigateBack()}}var o=TC.nodeFor(t);o&&ko.bindingHandlers.click.init(t,a,n,r)}},function(){function t(t,e,n,r,i){function o(){return TC.Utils.getPaneOptions(ko.utils.unwrapObservable(e()),n())}return TC.createNode(t,o(),TC.Utils.extractNode(i),TC.Utils.extractContext(i)),{controlsDescendantBindings:!0}}ko.bindingHandlers.pane={init:t}}(),ko.bindingHandlers.publish={init:function(t,e,n,r){function u(){return function(){o.publish(a.value,TC.Utils.cloneData(a.data))}}var o=TC.nodeFor(t).pane.pubsub;if(o){var a=TC.Utils.normaliseBindings(e,n),s=ko.bindingHandlers.validatedClick||ko.bindingHandlers.click;s.init(t,u,n,r)}}};