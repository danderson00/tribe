var utils = require('tribe/utilities/resources'),
    fs = require('q-io/fs');

module.exports = function (property, path, recursive) {
    return function (context) {
        return utils.listTree(path, recursive).then(function (files) {
            context[property] = files.concat(context[property] || []);
        });
    };
};