var utils = require('tribe/utilities'),
    fs = require('q-io/fs');

module.exports = function (property, path, filter, recursive) {
    return function (context) {
        return utils.files.listTree(utils.paths.resolveAppPath(path), filter, recursive).then(function (files) {
            context[property] = files.concat(context[property] || []);
        });
    };
};