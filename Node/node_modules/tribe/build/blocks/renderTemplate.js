var templates = require('tribe/build').templates,
    fs = require('q-io/fs'),
    _ = require('underscore');

module.exports = function (name) {
    return {
        to: function (targetPath) {
            return function (context) {
                var content = _.template(templates(name), context);
                if (targetPath)
                    return fs.write(targetPath, content);
                else
                    return content;
            };
        }
    };
};