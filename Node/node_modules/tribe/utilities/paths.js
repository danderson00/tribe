var options = require('tribe/options'),
    path = require('path');

module.exports = {
    resolveAppPath: function (targetPath) {
        return path.resolve(options.basePath, targetPath);
    },
    appPathFor: function (fullPath) {
        return fullPath.replace(options.basePath, '').replace(/\\/g, '/');
    },
    resourcePathFor: function (fullPath, resourceFolder) {
        var appPath = module.exports.appPathFor(fullPath);
        return ensureLeadingSlash(appPath.substring(resourceFolder ? resourceFolder.length + 1 : 0, appPath.lastIndexOf('.')));
    },
    markupIdentifierFor: function (path, type) {
        return (type + '-' + path).replace(/\//g, '-').replace(/\./g, '');
    }
};

function ensureLeadingSlash(path) {
    if (path.charAt(0) !== '/')
        return '/' + path;
    return path;
}