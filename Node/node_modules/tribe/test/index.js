var options = require('tribe/options'),
    utils = require('tribe/utilities'),
    watcher = require('tribe/utilities/watcher'),
    framework = require('./' + options.testFramework),
    service = require('./service'),
    _ = require('underscore');

module.exports = _.extend(framework, {
    initialise: function (testFolder, sourceFolder) {
        framework.loadDirectory(testFolder);

        watcher.watch(testFolder, {
            createOrUpdate: function (changePath) {
                framework.loadFile(changePath, changePath.replace(testFolder, ''));
            }
        });

        watcher.watch(sourceFolder, {
            //update: function (changePath) {
            //    utils.clearCache(changePath);
            //}
        });
    }
});
