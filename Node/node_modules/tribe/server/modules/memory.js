var folders = {};

var api = module.exports = function (path) {
    return function (app) {
        app.use(path, function (req, res) {
            var folder = folders[path],
                filename = req.path.substring(req.path.lastIndexOf('/') + 1);

            if (folder && folder[filename])
                res.send(folder[filename]).end();
            else
                res.status(404).end();
        });
    };
};

api.mapFile = function (from, toFolder, toFile) {
    var folder = folders[toFolder],
        content = folder && folder[toFile];

    return function (app) {
        app.all(from, function (req, res) {

            if (content)
                res.send(content).end();
            else
                res.status(404).end();
        });
    };
};

api.register = function (path, files) {
    folders[path] = files;
};

api.folders = folders;