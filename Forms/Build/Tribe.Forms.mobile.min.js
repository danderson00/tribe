(function(){var n,v,r,s,i,h,u,y,tt,p,it,w,b,f,c,l,a,k,d,e,g,nt,o,t=function(n,t){return function(){return n.apply(t,arguments)}};n=jQuery,o={startDate:null,endDate:null,dowNames:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDayOfTheWeekIndex:0,autoFillToday:!1,alwaysVisible:!1,autoHideAfterClick:!1,parseDate:null,formatDate:null,onChange:null},h="lw-dp",i="lw-dp-active-day",y="lw-dp-dows",tt="lw-dp-dows-last-column",p="lw-dp-firstweek",it="lw-dp-hidden",w="lw-dp-lastweek",b="lw-dp-month",f="lw-dp-neighbour-month-day",c="lw-dp-next",l="lw-dp-out-of-interval",a="lw-dp-previous",k="lw-dp-today",d="lw-dp-toolbar",e="lw-dp-week",g="lw-dp-week-last-column",nt="lw-dp-weekend",u="lw-datepicker",r=function(n,t){return n.getFullYear()<t.getFullYear()?-1:n.getFullYear()>t.getFullYear()?1:n.getMonth()<t.getMonth()?-1:n.getMonth()>t.getMonth()?1:n.getDate()<t.getDate()?-1:n.getDate()>t.getDate()?1:0},s=function(n){return Object.prototype.toString.call(n)!=="[object Date]"?!1:!isNaN(n.getTime())},v=function(){function o(i,r){this.destroy=t(this.destroy,this),this._handleKeyDown=t(this._handleKeyDown,this),this.showNextMonth=t(this.showNextMonth,this),this.showPreviousMonth=t(this.showPreviousMonth,this),this.show=t(this.show,this),this.hide=t(this.hide,this),this._isDateInsidePeriod=t(this._isDateInsidePeriod,this),this.setCurrentDate=t(this.setCurrentDate,this),this.setActiveDate=t(this.setActiveDate,this),this._updateMonth=t(this._updateMonth,this),this._getDateFromElement=t(this._getDateFromElement,this),this._onChange=t(this._onChange,this),this._onClick=t(this._onClick,this),this.input=i,this.input.bind("focus",this.show),this.input.bind("blur",this.hide),this.input.bind("keydown",this._handleKeyDown),this.input.bind("change",this._onChange),this.input.bind("click",this._onClick),this.isIE=n.browser.msie&&parseInt(n.browser.version,10)<=8,this.input.data(u,this),this.settings={startDate:r.startDate,endDate:r.endDate,dowNames:r.dowNames,monthNames:r.monthNames,firstDayOfTheWeekIndex:r.firstDayOfTheWeekIndex,autoFillToday:r.autoFillToday,alwaysVisible:r.alwaysVisible,autoHideAfterClick:r.autoHideAfterClick,parseDate:r.parseDate,formatDate:r.formatDate,onChange:r.onChange},this.todayDate=new Date,this.currentDate=this.settings.startDate||new Date,this._createDatepicker(),this.settings.autoFillToday&&this._isDateInsidePeriod(new Date)&&(this.activeDate=new Date),this.setActiveDate(this._parseDate(this.input.val())),this.settings.alwaysVisible?this.wrapper.insertAfter(this.input):this.wrapper.appendTo(document.body),this.margin=parseInt(this.wrapper.css("margin-top"),10),this.wrapper.css("margin",0),this._bindEvents(),this.settings.alwaysVisible&&this.updatePosition(),this.updateInput(),this._updateMonth(),this.hide()}return o.name="LightweightDatepicker",o.prototype.canShowPreviousMonth=!0,o.prototype.canShowNextMonth=!0,o.prototype.shouldHide=!0,o.prototype._onClick=function(){if(!n("."+h).has(this.wrapper).length)return this.show()},o.prototype._onChange=function(){if(!this.updatingInput)return this.setActiveDate(this._parseDate(this.input.val()))},o.prototype._createDatepicker=function(){return this.wrapper=n("<div class="+h+"/>"),this.toolbar=n("<div class="+d+"/>").appendTo(this.wrapper),this.previous=n("<div class="+a+"/>").appendTo(this.toolbar),this.next=n("<div class="+c+"/>").appendTo(this.toolbar),this.month=n("<div class="+b+"/>").appendTo(this.toolbar),this._renderDows().appendTo(this.wrapper),this.days=n("<div/>").appendTo(this.wrapper)},o.prototype._bindEvents=function(){var r,t=this;return this.wrapper.bind("mousedown touchstart",function(n){return n.preventDefault(),n.stopPropagation(),t.isIE?t.shouldHide=!1:void 0}),r=this.isIE?"mousedown":"click touchstart",this.toolbar.delegate("."+c,r,this.showNextMonth),this.toolbar.delegate("."+a,r,this.showPreviousMonth),this.days.delegate("li:not(."+i+"):not(."+l+")",r,function(i){var r;if(r=n(i.currentTarget),t.setActiveDate(t._getDateFromElement(r)),t.settings.autoHideAfterClick&&t.hide(),typeof t.settings.onChange=="function")t.settings.onChange(t.activeDate,t.input);return!1})},o.prototype._getDateFromElement=function(n){var t,r,u,i;return t=n.text(),u=this.currentDate.getFullYear(),i=0,n.hasClass(f)&&(i=t>10?-1:1),r=this.currentDate.getMonth()+i,new Date(u,r,t)},o.prototype.updateInput=function(){return this.input.val(this._formatDate(this.activeDate)),this.updatingInput=!0,this.input.trigger("change"),this.updatingInput=!1},o.prototype._updateMonth=function(){var t,v,d,o,tt,et,it,rt,s,y,ut,ft,c,u,h,b,a=this;for(this.month.html(this.settings.monthNames[this.currentDate.getMonth()]+", "+this.currentDate.getFullYear()),t=this.currentDate,y=new Date(t.getFullYear(),t.getMonth(),0),this.settings.startDate!=null&&y.getTime()<this.settings.startDate.getTime()?(this.canShowPreviousMonth=!1,n(this.previous).hide()):(this.canShowPreviousMonth=!0,n(this.previous).show()),rt=new Date(t.getFullYear(),t.getMonth()+1,1),this.settings.endDate!=null&&rt.getTime()>this.settings.endDate.getTime()?(this.canShowNextMonth=!1,n(this.next).hide()):(this.canShowNextMonth=!0,n(this.next).show()),it=new Date(t.getFullYear(),t.getMonth(),1).getDay(),ut=(this.settings.firstDayOfTheWeekIndex+6)%7,o=(7-it+this.settings.firstDayOfTheWeekIndex)%7,o===0&&(o=7),et=y.getDate(),v=new Date(t.getFullYear(),t.getMonth(),o-6),tt=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),u=Math.ceil((tt+7-o)/7),ft=function(n){var o,u,e;return u=[],o="",e=n.getDate(),n.getMonth()!==t.getMonth()&&u.push(f),(n.getDay()===0||n.getDay()===6)&&u.push(nt),n.getDay()===ut&&u.push(g),r(n,a.todayDate)===0&&(u.push(k),e="<span>"+e+"<\/span>"),a.activeDate!=null&&r(n,a.activeDate)===0&&u.push(i),a._isDateInsidePeriod(v)||(u.push(l),e=""),u.length&&(o=" class='"+u.join(" ")+"'"),n.setDate(n.getDate()+1),"<li"+o+">"+e+"<\/li>"},s="",c=h=1;1<=u?h<=u:h>=u;c=1<=u?++h:--h){for(s+=c===1?"<ul class='"+e+" "+p+"'>":c===u?"<ul class='"+e+" "+w+"'>":"<ul class="+e+">",d=b=1;b<=7;d=++b)s+=ft(v);s+="<\/ul>"}return this.days.html(s)},o.prototype.setActiveDate=function(t){var u,r;return s(t)?this._isDateInsidePeriod(t)?(r=this.activeDate,this.activeDate=t,this.setCurrentDate(t),this.updateInput(),r!=null&&t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()?(this.days.find("li."+i).removeClass(i),u=this.days.find("li:not(."+f+")").filter(function(){return parseInt(n(this).text(),10)===t.getDate()}),u.addClass(i)):void 0):!1:!1},o.prototype.setCurrentDate=function(n){return this.currentDate=n,this._updateMonth()},o.prototype._isDateInsidePeriod=function(n){return this.settings.startDate!=null&&r(n,this.settings.startDate)===-1?!1:this.settings.endDate!=null&&r(n,this.settings.endDate)===1?!1:!0},o.prototype._parseDate=function(n){return typeof this.settings.parseDate=="function"?this.settings.parseDate(n):new Date(Date.parse(n))},o.prototype._formatDate=function(n){if(s(n))return typeof this.settings.formatDate=="function"?this.settings.formatDate(n):n!=null?n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear():""},o.prototype._renderDows=function(){var r,s,u,t,f,e,i,h,o;for(s=this.settings.dowNames[this.settings.firstDayOfTheWeekIndex],u=!1,t="<ul class="+y+">",e="",o=this.settings.dowNames,i=0,h=o.length;i<h;i++)f=o[i],f===s&&(u=!0),r="<li>"+f+"<\/li>",u?t+=r:e+=r;return t+e+"<\/ul>",n(t)},o.prototype.updatePosition=function(){var t,i,r,u,f;return t=this.settings.alwaysVisible?this.input.position():this.input.offset(),f=this.wrapper.outerWidth(),u=this.wrapper.outerHeight(),i=t.left,n("body").width()>i+f?this.wrapper.css({left:i}):t.left>f+this.margin?this.wrapper.css({left:n("body").width()-f+this.margin}):this.wrapper.css({left:i}),this.wrapper.removeClass("lw-dp-opposite-vertical"),r=t.top+this.input.outerHeight()+this.margin,n(document).height()>r+u?this.wrapper.css({top:r}):t.top>u+this.margin?(this.wrapper.css({top:t.top-u-this.margin}),this.wrapper.addClass("lw-dp-opposite-vertical")):this.wrapper.css({top:r})},o.prototype.hide=function(){var n;return!this.settings.alwaysVisible&&this.shouldHide&&this.wrapper.detach(),this.shouldHide||(n=this.input)!=null&&n.focus(),this.shouldHide=!0},o.prototype.show=function(){return this.settings.alwaysVisible||this.wrapper.appendTo(document.body),this.updatePosition(),this._updateMonth()},o.prototype.showPreviousMonth=function(){return this.setCurrentDate(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1,this.currentDate.getDate()))},o.prototype.showNextMonth=function(){return this.setCurrentDate(new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1,this.currentDate.getDate()))},o.prototype._handleKeyDown=function(n){var i,r,t,u,f;r=n.keyCode,i=!0,f=this.input[0].selectionStart,u=this.input[0].selectionEnd;switch(r){case 27:return this.input.blur(),!1;case 33:for(t=new Date(this.activeDate.getFullYear(),this.activeDate.getMonth()-1,this.activeDate.getDate());t.getMonth()===this.activeDate.getMonth();)t.setDate(t.getDate()-1);this.setActiveDate(t);break;case 34:for(t=new Date(this.activeDate.getFullYear(),this.activeDate.getMonth()+1,this.activeDate.getDate());t.getMonth()===this.activeDate.getMonth()+2;)t.setDate(t.getDate()-1);this.setActiveDate(t);break;case 38:this.setActiveDate(new Date(this.activeDate.getFullYear(),this.activeDate.getMonth(),this.activeDate.getDate()-1));break;case 40:this.setActiveDate(new Date(this.activeDate.getFullYear(),this.activeDate.getMonth(),this.activeDate.getDate()+1));break;default:i=!1}return this.input[0].selectionStart=f,this.input[0].selectionEnd=u,!i},o.prototype.destroy=function(){return this.toolbar.undelegate(),this.days.undelegate(),this.input.unbind("focus",this.show),this.input.unbind("blur",this.hide),this.input.unbind("keydown",this._handleKeyDown),this.input.unbind("change",this._onChange),this.input.unbind("click",this._onClick),this.input.data(u,null),this.input=null},o}(),n.fn.lwDatepicker=function(t){return t=n.extend({},o,t),this.each(function(){var i;return i=n(this),i.is("input, textarea")&&!i.data(u)?new v(i,t):void 0})},n.fn.lwDatepicker.setDefaultOptions=function(t){return t==null&&(t={}),o=n.extend(o,t)}}).call(this),function(){function f(n,t,i){return t.validator(n(),i.params||!0)?!0:(n.error=ko.validation.formatMessage(i.message||t.message,i.params),n.__valid__(!1),!1)}function e(n,t,i){n.isValidating(!0);var r=function(r){var u=!1,f="";n.__valid__()&&((r.message?(u=r.isValid,f=r.message):u=r,u)||(n.error=ko.validation.formatMessage(f||i.message||t.message,i.params),n.isValidating(!1),n.__valid__(u)))};t.validator(n(),i.params||!0,r)}var i;if(typeof ko===undefined)throw"Knockout is required, please ensure it is loaded before loading this validation plug-in";var t={registerExtenders:!0,messagesOnModified:!0,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,decorateElement:!1,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",grouping:{deep:!1,observable:!0}},r=["required","pattern","min","max","step"],u=function(n){window.setImmediate?window.setImmediate(n):window.setTimeout(n,0)},n=function(){var u=(new Date).getTime(),r={},i="__ko_validation__";return{isArray:function(n){return n.isArray||Object.prototype.toString.call(n)==="[object Array]"},isObject:function(n){return n!==null&&typeof n=="object"},values:function(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(n[t]);return i},getValue:function(n){return typeof n=="function"?n():n},hasAttribute:function(n,t){return n.getAttribute(t)!==null},isValidatable:function(n){return n.rules&&n.isValid&&n.isModified},insertAfter:function(n,t){n.parentNode.insertBefore(t,n.nextSibling)},newId:function(){return u+=1},getConfigOptions:function(i){var r=n.contextFor(i);return r||t},setDomData:function(t,u){var f=t[i];f||(t[i]=f=n.newId()),r[f]=u},getDomData:function(n){var t=n[i];return t?r[t]:undefined},contextFor:function(t){switch(t.nodeType){case 1:case 8:var i=n.getDomData(t);if(i)return i;if(t.parentNode)return n.contextFor(t.parentNode)}return undefined},isEmptyVal:function(n){return n===undefined?!0:n===null?!0:n===""?!0:void 0}}}();ko.validation=function(){var i=0;return{utils:n,init:function(n,r){i>0&&!r||(n=n||{},n.errorElementClass=n.errorElementClass||n.errorClass||t.errorElementClass,n.errorMessageClass=n.errorMessageClass||n.errorClass||t.errorMessageClass,ko.utils.extend(t,n),t.registerExtenders&&ko.validation.registerExtenders(),i=1)},configure:function(n){ko.validation.init(n)},group:function(i,r){var r=ko.utils.extend(t.grouping,r),f=ko.observableArray([]),u=null,e=function e(t,i){var o=[],u=ko.utils.unwrapObservable(t);i=i!==undefined?i:r.deep?1:-1,ko.isObservable(t)&&(t.isValid||t.extend({validatable:!0}),f.push(t)),u&&(n.isArray(u)?o=u:n.isObject(u)&&(o=n.values(u))),i!==0&&ko.utils.arrayForEach(o,function(n){n&&!n.nodeType&&e(n,i+1)})};return r.observable?(e(i),u=ko.computed(function(){var n=[];return ko.utils.arrayForEach(f(),function(t){t.isValid()||n.push(t.error)}),n})):u=function(){var n=[];return f([]),e(i),ko.utils.arrayForEach(f(),function(t){t.isValid()||n.push(t.error)}),n},u.showAllMessages=function(n){n==undefined&&(n=!0),u(),ko.utils.arrayForEach(f(),function(t){t.isModified(n),t.notifySubscribers()})},i.errors=u,i.isValid=function(){return i.errors().length===0},u},formatMessage:function(n,t){return n.replace(/\{0\}/gi,t)},addRule:function(n,t){return n.extend({validatable:!0}),n.rules.push(t),n},addAnonymousRule:function(t,i){var r=n.newId();ko.validation.rules[r]={validator:i.validator,message:i.message||"Error"},ko.validation.addRule(t,{rule:r,params:i.params})},addExtender:function(n){ko.extenders[n]=function(t,i){return i.message?ko.validation.addRule(t,{rule:n,message:i.message,params:i.params||!0}):ko.validation.addRule(t,{rule:n,params:i})}},registerExtenders:function(){if(t.registerExtenders)for(var n in ko.validation.rules)ko.validation.rules.hasOwnProperty(n)&&(ko.extenders[n]||ko.validation.addExtender(n))},insertValidationMessage:function(i){var r=document.createElement("SPAN");return r.className=t.errorMessageClass,n.insertAfter(i,r),r},parseInputValidationAttributes:function(t,i){ko.utils.arrayForEach(r,function(r){n.hasAttribute(t,r)&&ko.validation.addRule(i(),{rule:r,params:t.getAttribute(r)||!0})})}}}(),ko.validation.rules={},ko.validation.rules.required={validator:function(n,t){var i;return n===undefined||n===null?!t:(i=n,typeof n=="string"&&(i=n.replace(/^\s+|\s+$/g,"")),t&&(i+"").length>0)},message:"This field is required."},ko.validation.rules.min={validator:function(t,i){return n.isEmptyVal(t)||t>=i},message:"Please enter a value greater than or equal to {0}."},ko.validation.rules.max={validator:function(t,i){return n.isEmptyVal(t)||t<=i},message:"Please enter a value less than or equal to {0}."},ko.validation.rules.minLength={validator:function(t,i){return n.isEmptyVal(t)||t.length>=i},message:"Please enter at least {0} characters."},ko.validation.rules.maxLength={validator:function(t,i){return n.isEmptyVal(t)||t.length<=i},message:"Please enter no more than {0} characters."},ko.validation.rules.pattern={validator:function(t,i){return n.isEmptyVal(t)||t.match(i)!=null},message:"Please check this value."},ko.validation.rules.step={validator:function(t,i){return n.isEmptyVal(t)||t%i==0},message:"The value must increment by {0}"},ko.validation.rules.email={validator:function(t,i){return n.isEmptyVal(t)||i&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},message:"{0} is not a proper email address"},ko.validation.rules.date={validator:function(t,i){return n.isEmptyVal(t)||i&&!/Invalid|NaN/.test(new Date(t))},message:"Please enter a proper date"},ko.validation.rules.dateISO={validator:function(t,i){return n.isEmptyVal(t)||i&&/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(t)},message:"Please enter a proper date"},ko.validation.rules.number={validator:function(t,i){return n.isEmptyVal(t)||i&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(t)},message:"Please enter a number"},ko.validation.rules.digit={validator:function(t,i){return n.isEmptyVal(t)||i&&/^\d+$/.test(t)},message:"Please enter a digit"},ko.validation.rules.phoneUS={validator:function(t,i){return typeof t!="string"?!1:n.isEmptyVal(t)?!0:(t=t.replace(/\s+/g,""),i&&t.length>9&&t.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/))},message:"Please specify a valid phone number"},ko.validation.rules.equal={validator:function(t,i){var r=i;return t===n.getValue(r)},message:"Values must equal"},ko.validation.rules.notEqual={validator:function(t,i){var r=i;return t!==n.getValue(r)},message:"Please choose another value."},ko.validation.rules.unique={validator:function(t,i){var r=n.getValue(i.collection),u=n.getValue(i.externalValue),f=0;return!t||!r?!0:(ko.utils.arrayFilter(ko.utils.unwrapObservable(r),function(n){t===(i.valueAccessor?i.valueAccessor(n):n)&&f++}),f<(u!==undefined&&t!==u?1:2))},message:"Please make sure the value is unique."},function(){ko.validation.registerExtenders()}(),function(){var t=ko.bindingHandlers.value.init;ko.bindingHandlers.value.init=function(i,r,f){var e,o;t(i,r,f),e=n.getConfigOptions(i),e.parseInputAttributes&&u(function(){ko.validation.parseInputValidationAttributes(i,r)}),e.insertMessages&&n.isValidatable(r())&&(o=ko.validation.insertValidationMessage(i),e.messageTemplate?ko.renderTemplate(e.messageTemplate,{field:r()},null,o,"replaceNode"):ko.applyBindingsToNode(o,{validationMessage:r()})),e.decorateElement&&n.isValidatable(r())&&ko.applyBindingsToNode(i,{validationElement:r()})}}(),ko.bindingHandlers.validationMessage={update:function(t,i){var r=i(),s=n.getConfigOptions(t),h=ko.utils.unwrapObservable(r),u=!1,f=!1,e,o;r.extend({validatable:!0}),u=r.isModified(),f=r.isValid(),e=function(){return!s.messagesOnModified||u?f?null:r.error:null},o=function(){return u?!f:!1},ko.bindingHandlers.text.update(t,e),ko.bindingHandlers.visible.update(t,o)}},ko.bindingHandlers.validationElement={update:function(t,i){var r=i(),u=n.getConfigOptions(t),s=ko.utils.unwrapObservable(r),f=!1,e=!1,o;r.extend({validatable:!0}),f=r.isModified(),e=r.isValid(),o=function(){var n={},t=f?!e:!1;return u.decorateElement||(t=!1),n[u.errorElementClass]=t,n},ko.bindingHandlers.css.update(t,o)}},ko.bindingHandlers.validationOptions=function(){return{init:function(i,r){var f=ko.utils.unwrapObservable(r()),u;f&&(u=ko.utils.extend({},t),ko.utils.extend(u,f),n.setDomData(i,u))}}}(),ko.extenders.validation=function(t,i){return ko.utils.arrayForEach(n.isArray(i)?i:[i],function(n){ko.validation.addAnonymousRule(t,n)}),t},ko.extenders.validatable=function(t,i){var r,u;return i&&!n.isValidatable(t)?(t.error=null,t.rules=ko.observableArray(),t.isValidating=ko.observable(!1),t.__valid__=ko.observable(!0),t.isModified=ko.observable(!1),r=ko.computed(function(){var n=t(),i=t.rules();return ko.validation.validateObservable(t),!0}),t.isValid=ko.computed(function(){return t.__valid__()}),u=t.subscribe(function(){t.isModified(!0)}),t._disposeValidation=function(){t.isValid.dispose(),t.rules.removeAll(),t.isModified._subscriptions.change=[],t.isValidating._subscriptions.change=[],t.__valid__._subscriptions.change=[],u.dispose(),r.dispose(),delete t.rules,delete t.error,delete t.isValid,delete t.isValidating,delete t.__valid__,delete t.isModified}):i===!1&&n.isValidatable(t)&&t._disposeValidation&&t._disposeValidation(),t},ko.validation.validateObservable=function(n){for(var r=0,i,t,u=n.rules(),o=u.length;r<o;r++)if(t=u[r],i=ko.validation.rules[t.rule],i.async||t.async)e(n,i,t);else if(!f(n,i,t))return!1;return n.error=null,n.__valid__(!0),!0},ko.validatedObservable=function(n){if(!ko.validation.utils.isObject(n))return ko.observable(n).extend({validatable:!0});var t=ko.observable(n);return t.errors=ko.validation.group(n),t.isValid=ko.computed(function(){return t.errors().length===0}),t},ko.validation.localize=function(n){var t;for(t in n)ko.validation.rules.hasOwnProperty(t)&&(ko.validation.rules[t].message=n[t])},ko.applyBindingsWithValidation=function(n,t,i){var f=arguments.length,r,u;f>2?(r=t,u=i):f<2?r=document.body:arguments[1].nodeType?r=t:u=arguments[1],ko.validation.init(),u&&ko.validation.utils.setDomData(r,u),ko.applyBindings(n,t)},i=ko.applyBindings,ko.applyBindings=function(n,t){ko.validation.init(),i(n,t)}}(),function(){function t(n){var t=observable.rules();observable.rules([]),observable(n),observable.isModified(!1),observable.rules(t)}var n=ko.extenders.validatable;ko.extenders.validatable=function(i,r){n(i,r),i.setWithoutValidation=t}}(),TF=window.TF||{},TF.renderTemplate=function(n,t){$(t).empty().append($("head script#template--Forms-"+n).html())},ko.validation.rules.date={validator:function(n,t){return!n||t&&Dates.tryParseDate(n)},message:"Please enter a proper date"},function(){function n(n){ko.bindingHandlers[n]={init:function(i,r,u,f,e){return t(n,i,r,u,f,e),{controlsDescendantBindings:!0}}}}function t(n,t,i,r,u,f){function c(){e.isDefault&&setTimeout(function(){s.focus()},100)}function l(){u.__node&&s.keyup(function(n){if(n.which===13){$(n.target).change().blur();var i=$(t).closest(".form").find("button:eq(0)");i.length===0&&u.__node&&(i=$(u.__node.pane.element).find("button:eq(0)")),i.click()}})}function a(){s.eq(0).attr("id",e.id)}var e=r(),h,o,s;for(e.value=i(),!ko.isObservable(e.value)&&_.isFunction(e.value)&&(e.value=e.value()),h=f.extend(e),ko.applyBindingsToDescendants(h,t),TF.renderTemplate(n,t),o=0;o<t.children.length;o++)ko.applyBindings(e,t.children[o]);s=$(t).find("input"),a(),c(),l()}n("display"),n("textField"),n("dateField"),n("passwordField"),n("selectField"),n("radioField"),n("booleanField"),ko.bindingHandlers.field={update:function(n,i,r,u,f){var e=i();t(e.type+"Field",n,function(){return e.value},i,u,f)}}}(),ko.bindingHandlers.focus={update:function(n,t,i,r,u){var f=r.__context||u.$root.__context;f&&$.when(f.renderOperation.promise).done(function(){setTimeout(function(){$(n).focus()},100)})}},function(){ko.bindingHandlers.select={update:function(n,t,i){function o(n,t){var i=$(t.target).find("option:selected").index();ko.isObservable(f)&&f(i?u[i-1]:null)}var f=t(),r=i(),u=ko.utils.unwrapObservable(r.source),e=r.property?_.map(u,function(n){return n[r.property]}):u.slice(0);e.splice(0,0,[r.initialText||"Select..."]),setTimeout(function(){TF.renderTemplate("/Templates/select.list",n),ko.applyBindings({source:e,change:o},n.children[0])})}},ko.bindingHandlers.label={update:function(n,t){$(n).attr("label",ko.utils.unwrapObservable(t()))}}}(),function(){ko.bindingHandlers.validatedClick={init:function(n,t,i,r){function f(n){var r=$.extend(this,{__context:null,__node:null}),i=ko.validation.group(r,{deep:!0});i().length>0?i.showAllMessages():t()(n)}var u=function(){return f};return ko.bindingHandlers.click.init(n,u,i,r)}}}(),$("head").append('<script type="text/template" id="template--booleanField"><div class="field">\n    <div class="label">\n        <span data-bind="text: displayText"><\/span>\n    <\/div>\n    <div class="display">\n        <input type="checkbox" data-bind="checked: value" />\n    <\/div>\n    <div style="clear: both"><\/div>\n<\/div>\n<\/script>'),$("head").append('<script type="text/template" id="template--dateField"><div class="field">\n    <div class="label">\n        <span data-bind="text: displayText"><\/span>\n    <\/div>\n    <div class="display">\n        <input type="text" class="datePicker" data-bind="value: value, restrictKeys: \'[^0-9\\/]+\'" />\n    <\/div>\n    <div style="clear: both"><\/div>\n<\/div><\/script>'),$("head").append('<script type="text/template" id="template--display"><div class="field">\n    <div class="label">\n        <span data-bind="text: displayText"><\/span>\n    <\/div>\n    <div class="display">\n        <span data-bind="text: value"><\/span>\n    <\/div>\n    <div style="clear: both"><\/div>\n<\/div><\/script>'),$("head").append('<script type="text/template" id="template--passwordField"><div class="field">\n    <div class="label">\n        <span data-bind="text: displayText"><\/span>\n    <\/div>\n    <div class="display">\n        <input type="password" data-bind="value: value"><\/input>\n    <\/div>\n    <div style="clear: both"><\/div>\n<\/div><\/script>'),$("head").append('<script type="text/template" id="template--radioField"><div class="field">\n    <div class="label">\n        <span data-bind="text: displayText"><\/span>\n    <\/div>\n    <div class="display" data-bind="foreach: items">\n        <label>\n            <input type="radio" data-bind="value: $data, checked: $parent.value, attr: { group: $parent.displayText.replace(/ /g, \'_\') }" />\n            <span data-bind="text: $data"><\/span>\n        <\/label>\n        &nbsp;\n    <\/div>\n    <div style="clear: both"><\/div>\n<\/div><\/script>'),$("head").append('<script type="text/template" id="template--select"><select data-bind="foreach: source">\n    <optgroup data-bind="label: group, foreach: list">\n        <option data-bind="text: $data"><\/option>\n    <\/optgroup>\n<\/select><\/script>'),$("head").append('<script type="text/template" id="template--select"><select data-bind="foreach: source, event: { change: change }">\n    <option data-bind="text: $data"><\/option>\n<\/select><\/script>'),$("head").append('<script type="text/template" id="template--selectField"><div class="field">\n    <div class="label">\n        <span data-bind="text: displayText"><\/span>\n    <\/div>\n    <div class="display" data-bind="pane: \'/Common/dropDown\', data: $data"><\/div>\n    <div style="clear: both"><\/div>\n<\/div><\/script>'),$("head").append('<script type="text/template" id="template--textField"><div class="field">\n    <div class="label">\n        <span data-bind="text: displayText"><\/span>\n    <\/div>\n    <div class="display">\n        <input type="text" data-bind="value: value" />\n    <\/div>\n    <div style="clear: both"><\/div>\n<\/div><\/script>'),$("head").append('<script type="text/template" id="template--validationMessage"><div data-bind="pane: \'/Common/tooltip\', data: { html: $data.field.error, autoShow: true, position: \'right\' }"><\/div><\/script>'),$("<style/>").attr("class","__tribe").text(".lw-dp{position:absolute;z-index:100;overflow:hidden;cursor:default;width:141px;border-width:1px;border-style:solid;padding:4px;margin:5.5px;background:#45484d;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzQ1NDg0ZCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDAwMDAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);background:-moz-linear-gradient(top,rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,rgba(69,72,77,1)),color-stop(100%,rgba(0,0,0,1)));background:-webkit-linear-gradient(top,rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%);background:-o-linear-gradient(top,rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%);background:-ms-linear-gradient(top,rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%);background:linear-gradient(top,rgba(69,72,77,1) 0%,rgba(0,0,0,1) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#45484d',endColorstr='#000000',GradientType=0);border-radius:6px;-moz-border-radius:6px;-webkit-border-radius:6px;box-shadow:3px 3px 3px rgba(0,0,0,.3);-moz-box-shadow:3px 3px 3px rgba(0,0,0,.3);-webkit-box-shadow:3px 3px 3px rgba(0,0,0,.3);-moz-user-select:none;-webkit-user-select:none;-o-user-select:none;user-select:none}.lw-dp-hidden{display:none;box-shadow:none}.lw-dp-toolbar{text-align:center;overflow:hidden;font-size:12px;line-height:18px;color:#ddd;padding:0 0 2.2px}.lw-dp-month{display:inline-block;width:103px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.lw-dp-previous,.lw-dp-next{position:absolute;overflow:hidden;top:8px;width:0;height:0;color:#ddd;cursor:pointer;border-top:5.938px solid transparent;border-bottom:5.938px solid transparent}.lw-dp-previous{left:8px;border-right:11.875px solid #ddd}.lw-dp-next{right:8px;border-left:11.875px solid #ddd}.lw-dp-previous:hover{border-right-color:#797979}.lw-dp-next:hover{border-left-color:#797979}.lw-dp-previous:active{border-right-color:#acacac}.lw-dp-next:active{border-left-color:#acacac}.lw-dp-dows{padding:0;margin:0;overflow:hidden}.lw-dp-dows li,.lw-dp-week li{display:block;float:left;padding:0;margin:0;text-align:center;color:#fff}.lw-dp-dows li{font-size:9px;line-height:7.7px;width:20px;height:10px;padding:0;margin:0}.lw-dp-week{padding:0;margin:0;overflow:hidden}.lw-dp-week li{padding:0;margin:0;border-width:0;font-size:11px;color:#000;width:19px;height:19px;line-height:19px;background:#e0e0e0;border-left-width:1px;border-top-width:1px;border-style:solid;border-color:#f9f9f9;cursor:pointer}.lw-dp-dows-last-column,.lw-dp-week-last-column{border-right-width:1px}.lw-dp-lastweek li{padding:0;margin:0;border-bottom-width:1px}.lw-dp-firstweek li:first-child{-moz-border-radius:4px 0 0 0;-webkit-border-radius:4px 0 0 0;-o-border-radius:4px 0 0 0;-ms-border-radius:4px 0 0 0;-khtml-border-radius:4px 0 0 0;border-radius:4px 0 0 0}.lw-dp-firstweek li:last-child{-moz-border-radius:0 4px 0 0;-webkit-border-radius:0 4px 0 0;-o-border-radius:0 4px 0 0;-ms-border-radius:0 4px 0 0;-khtml-border-radius:0 4px 0 0;border-radius:0 4px 0 0}.lw-dp-lastweek li:first-child{-moz-border-radius:0 0 0 4px;-webkit-border-radius:0 0 0 4px;-o-border-radius:0 0 0 4px;-ms-border-radius:0 0 0 4px;-khtml-border-radius:0 0 0 4px;border-radius:0 0 0 4px}.lw-dp-lastweek li:last-child{-moz-border-radius:0 0 4px 0;-webkit-border-radius:0 0 4px 0;-o-border-radius:0 0 4px 0;-ms-border-radius:0 0 4px 0;-khtml-border-radius:0 0 4px 0;border-radius:0 0 4px 0}.lw-dp-week li:hover{background:#f4f4f4}li.lw-dp-weekend{background:#d0d0d0}li.lw-dp-today{-moz-border-radius:2px;-webkit-border-radius:2px;-o-border-radius:2px;-ms-border-radius:2px;-khtml-border-radius:2px;border-radius:2px}li.lw-dp-today span{display:block;width:17px;height:17px;line-height:17px;border:1px solid #acacac;-moz-border-radius:2px;-webkit-border-radius:2px;-o-border-radius:2px;-ms-border-radius:2px;-khtml-border-radius:2px;border-radius:2px}li.lw-dp-today:hover span{color:#797979}li.lw-dp-active-day,li.lw-dp-active-day:hover{position:relative;color:#f9f9f9;background:#797979}li.lw-dp-active-day:nth-child(n),li.lw-dp-active-day:hover:nth-child(n){background:none}li.lw-dp-active-day::before,li.lw-dp-active-day:hover::before{position:absolute;left:0;top:0;bottom:0;right:0;content:'';-moz-border-radius:2px;-webkit-border-radius:2px;-o-border-radius:2px;-ms-border-radius:2px;-khtml-border-radius:2px;border-radius:2px;background:#797979;z-index:-1}li.lw-dp-active-day:hover span{background:#e0e0e0}li.lw-dp-neighbour-month-day{color:#b9b9b9}li.lw-dp-out-of-interval,li.lw-dp-out-of-interval:hover{background:#ececec;cursor:default}").appendTo("head"),$("<style/>").attr("class","__tribe").text(".field{width:100%;margin-bottom:5px}.label{font-size:.7em}.display{width:100%}.display input{width:100%}.fieldColumn{float:left}.fieldColumn:nth-child(n+2){padding-left:20px}.validationElement{border:2px solid red!important}").appendTo("head");